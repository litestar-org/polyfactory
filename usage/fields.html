
  <!DOCTYPE html>
<html lang="en" data-accent-color="amber" data-content_root="">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Factory Fields - Polyfactory</title>
    <link rel="shortcut icon" href="../_static/favicon.svg"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="The post_generated decorator" href="decorators.html" /><link rel="prev" title="Factory Configuration" href="configuration.html" />

  <script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(sessionStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=aecf457f" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=f2d5353f" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/litestar-sphinx-theme.css?v=9989272a" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Factory Fields"/>
<meta name="twitter:card" content="summary"/>
<meta property="og:image" content="_static/logo-light.png"/>
  </head>
<body><div class="document"><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand mr-4" href="/">
      <img class="light-logo" src="../_static/logo-light.png" alt="polyfactory" height="28" />
      <img class="dark-logo" src="../_static/logo-dark.png" alt="polyfactory" height="28" />
      <strong>polyfactory</strong>
    </a>
    <div class="sy-head-links" id="NavLinks">
      <nav class="sy-head-nav">

<ul><li class="link"><a href="../index.html">Home</a></li>
      <li class="link"><button type="button">
            <span>Community</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="../contribution-guide.html">
                <span>Contributing</span>
                <small>Learn how to contribute to the Type Lens project</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file">
                <span>Code of Conduct</span>
                <small>Review the etiquette for interacting with the Litestar community</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file#security-ov-file">
                <span>Security</span>
                <small>Overview of Litestar's security protocols</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>About</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="https://litestar.dev/about/organization">
                <span>Litestar Organization</span>
                <small>Details about the Litestar organization</small>
              </a></li><li><a href="../releases.html">
                <span>Releases</span>
                <small>Explore the release process, versioning, and deprecation policy for Litestar</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>Release notes</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="../changelog.html">
                <span>Changelog</span>
                <small>All changes in the current major version</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>Help</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="https://discord.gg/litestar">
                <span>Discord Help Forum</span>
                <small>Dedicated Discord help forum</small>
              </a></li><li><a href="https://github.com/litestar-org/polyfactory/discussions">
                <span>GitHub Discussions</span>
                <small>GitHub Discussions</small>
              </a></li><li><a href="https://stackoverflow.com/questions/tagged/polyfactory">
                <span>Stack Overflow</span>
                <small>We monitor the <code><b>polyfactory</b></code> tag on Stack Overflow</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/Litestar-Org">
            <span>Sponsor</span>
            
          </a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden">
        
<form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form>
        
  <div class="nav-versions">
    <button type="button" aria-label="Versions">
      <span class="md:hidden">Versions</span>
      <span class="hidden md:inline">latest</span>
      <i class="i-lucide chevron-down"></i>
    </button>
    <div class="nav-versions-choices">
      <ul><li><a href="/latest">latest</a></li><li><a href="/main">development</a></li></ul></div>
  </div>
        
        <div class="sy-head-socials flex items-center">
    <a href="https://github.com/litestar-org/polyfactory" aria-label="GitHub">
      <i class="i-simpleicons github"></i>
    </a>
  <a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
    <i class="i-simpleicons x-twitter"></i>
  </a>
    <a href="https://discord.gg/litestar" aria-label="Discord">
      <i class="i-simpleicons discord"></i>
    </a>
</div>
      </div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden">
      <button class="js-theme theme-switch flex items-center"
        data-aria-auto="Switch to light color mode"
        data-aria-light="Switch to dark color mode"
        data-aria-dark="Switch to auto color mode">
        <i class="i-lucide theme-icon"></i>
      </button>
      <button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="NavLinks" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
<div class="sidebar-links">
  <ul>
    <li><a class="icon-link" href="https://github.com/orgs/litestar-org/discussions">
  <span class="icon">
    <svg viewBox="0 0 24 24" fill="none">
      <path fill="var(--accent-9)" fill-rule="evenodd" clip-rule="evenodd" d="M11 5a6 6 0 0 0-4.687 9.746c.215.27.315.62.231.954l-.514 2.058a1 1 0 0 0 1.485 1.1l2.848-1.71c.174-.104.374-.15.576-.148H13a6 6 0 0 0 0-12h-2Z"/>
      <circle fill="white" cx="12" cy="11" r="1"/>
      <circle fill="white" cx="9" cy="11" r="1"/>
      <circle fill="white" cx="15" cy="11" r="1"/>
    </svg>
  </span>
  <span class="text">Discussion</span>
</a></li>
  </ul>
</div>

        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="declaring_factories.html">Declaring Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="library_factories/index.html">Polyfactory Factories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library_factories/sqlalchemy_factory.html">SQLAlchemyFactory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Factory Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Factory Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="decorators.html">The <code class="docutils literal notranslate"><span class="pre">post_generated</span></code> decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="fixtures.html">Pytest fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="handling_custom_types.html">Handling Custom Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_coverage.html">Model coverage generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/constants.html">constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/exceptions.html">exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/factories/index.html">factories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/base.html">base_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/dataclass_factory.html">dataclass_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/typed_dict_factory.html">typed_dict_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/pydantic_factory.html">pydantic_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/msgspec_factory.html">msgspec_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/odmantic_odm_factory.html">odmantic_odm_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/beanie_odm_factory.html">beanie_odm_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/attrs_factory.html">attrs_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/sqlalchemy_factory.html">sqlalchemy_factory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_meta.html">field_meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/fields.html">fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/decorators.html">decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/persistence.html">persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pytest_plugin.html">pytest_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/value_generators/index.html">value_generators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/complex_types.html">complex_types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_collections.html">constrained_collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_dates.html">constrained_dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_numbers.html">constrained_numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_strings.html">constrained_strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/primitives.html">primitives</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribution-guide.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=user%3Alitestar-org+state%3Aopen+label%3A%22good+first+issue%22+++no%3Aassignee+repo%3A%22polyfactory%22&amp;type=issues">Available Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/litestar-org/.github?tab=coc-ov-file#readme">Code of Conduct</a></li>
</ul>

        </div>
      </div>
      
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4">
  <div class="localtoc">
    <h3>On this page</h3>
    <ul>
<li><a class="reference internal" href="#the-use-field">The <code class="docutils literal notranslate"><span class="pre">Use</span></code> Field</a></li>
<li><a class="reference internal" href="#the-ignore-field">The <code class="docutils literal notranslate"><span class="pre">Ignore</span></code> Field</a></li>
<li><a class="reference internal" href="#the-require-field">The <code class="docutils literal notranslate"><span class="pre">Require</span></code> Field</a></li>
<li><a class="reference internal" href="#the-postgenerated-field">The <code class="docutils literal notranslate"><span class="pre">PostGenerated</span></code> Field</a></li>
<li><a class="reference internal" href="#factories-as-fields">Factories as Fields</a></li>
</ul>

  </div><a class="js-repo-stats repo-stats flex items-center" href="https://github.com/litestar-org/polyfactory"
  data-type="github" data-user="litestar-org" data-repo="polyfactory">
  <span class="w-8 flex items-center justify-around shrink-0 text-3xl">
    <i class="i-simpleicons github"></i>
  </span>
  <span class="flex-grow px-2">
    <span>litestar-org/polyfactory</span>
    <span class="flex text-sm repo-stats-count">
      <span class="flex items-center pr-3">
        <i class="i-lucide star"></i>
        <strong class="js-repo-stars ml-1">0</strong>
      </span>
      <span class="flex items-center">
        <i class="i-lucide git-fork"></i>
        <strong class="js-repo-forks ml-1">0</strong>
      </span>
    </span>
  </span>
</a><div class="edit-this-page">
  <a href="https://github.com/litestar-org/polyfactory/blob/master/docs/usage/fields.rst">Edit this page</a>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div>
    </div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
    <div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList">
      
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">polyfactory</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li>
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Usage Guide</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li>
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Factory Fields</strong>
        <meta itemprop="position" content="3" />
      </li>
      
      
    </ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div>
    <div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="factory-fields">
<h1>Factory Fields<a class="headerlink" href="#factory-fields" title="Permalink to this heading">¶</a></h1>
<p>The factory api is designed to be as semantic and simple as possible, and by default it requires no customization to
mock data. Nonetheless, when you do need to customize and control the data being generated, polyfactory has you covered.
Lets look at a few examples:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Declaring a PersonFactory with hardcoded pets</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span data-line="4"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
</span><span data-line="5"><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="6">
</span><span data-line="7"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">DataclassFactory</span>
</span><span data-line="8">
</span><span data-line="9">
</span><span data-line="10"><span class="k">class</span> <span class="nc">Species</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
</span><span data-line="11">    <span class="n">CAT</span> <span class="o">=</span> <span class="s2">&quot;Cat&quot;</span>
</span><span data-line="12">    <span class="n">DOG</span> <span class="o">=</span> <span class="s2">&quot;Dog&quot;</span>
</span><span data-line="13">
</span><span data-line="14">
</span><span data-line="15"><span class="nd">@dataclass</span>
</span><span data-line="16"><span class="k">class</span> <span class="nc">Pet</span><span class="p">:</span>
</span><span data-line="17">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="18">    <span class="n">species</span><span class="p">:</span> <span class="n">Species</span>
</span><span data-line="19">    <span class="n">sound</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="20">
</span><span data-line="21">
</span><span data-line="22"><span class="nd">@dataclass</span>
</span><span data-line="23"><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
</span><span data-line="24">    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="25">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="26">    <span class="n">hobbies</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="27">    <span class="n">age</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span data-line="28">    <span class="n">birthday</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">]</span>
</span><span data-line="29">    <span class="n">pets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Pet</span><span class="p">]</span>
</span><span data-line="30">    <span class="n">assets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
</span><span data-line="31">
</span><span data-line="32">
</span><span data-line="33"><span class="n">pet_instance</span> <span class="o">=</span> <span class="n">Pet</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Roxy&quot;</span><span class="p">,</span> <span class="n">sound</span><span class="o">=</span><span class="s2">&quot;woof woof&quot;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="n">Species</span><span class="o">.</span><span class="n">DOG</span><span class="p">)</span>
</span><span data-line="34">
</span><span data-line="35">
</span><span data-line="36"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="37">    <span class="n">pets</span> <span class="o">=</span> <span class="p">[</span><span class="n">pet_instance</span><span class="p">]</span>
</span><span data-line="38">
</span><span data-line="39">
</span><span data-line="40"><span class="k">def</span> <span class="nf">test_is_pet_instance</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="41">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="42">    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span data-line="43">    <span class="k">assert</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">pet_instance</span>
</span></pre></div>
</div>
</div>
<p>In the example above, the call to <code class="docutils literal notranslate"><span class="pre">PersonFactory.build()</span></code> results in a <code class="docutils literal notranslate"><span class="pre">Person</span></code> where all values are randomly
generated, except the <code class="docutils literal notranslate"><span class="pre">pets</span></code> list, which will be the hardcoded value we defined.</p>
<section id="the-use-field">
<h2>The <code class="docutils literal notranslate"><span class="pre">Use</span></code> Field<a class="headerlink" href="#the-use-field" title="Permalink to this heading">¶</a></h2>
<p>This though is often not desirable. We could instead, define a factory for Pet where we restrict the choices to a range
we like. For example:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Using the <code class="docutils literal notranslate"><span class="pre">Use</span></code> field with a custom PetFactory to control the generation of a Person’s pets list</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span data-line="4"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
</span><span data-line="5"><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="6">
</span><span data-line="7"><span class="kn">from</span> <span class="nn">polyfactory</span> <span class="kn">import</span> <span class="n">Use</span>
</span><span data-line="8"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">DataclassFactory</span>
</span><span data-line="9">
</span><span data-line="10">
</span><span data-line="11"><span class="k">class</span> <span class="nc">Species</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
</span><span data-line="12">    <span class="n">CAT</span> <span class="o">=</span> <span class="s2">&quot;Cat&quot;</span>
</span><span data-line="13">    <span class="n">DOG</span> <span class="o">=</span> <span class="s2">&quot;Dog&quot;</span>
</span><span data-line="14">
</span><span data-line="15">
</span><span data-line="16"><span class="nd">@dataclass</span>
</span><span data-line="17"><span class="k">class</span> <span class="nc">Pet</span><span class="p">:</span>
</span><span data-line="18">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="19">    <span class="n">species</span><span class="p">:</span> <span class="n">Species</span>
</span><span data-line="20">    <span class="n">sound</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="21">
</span><span data-line="22">
</span><span data-line="23"><span class="nd">@dataclass</span>
</span><span data-line="24"><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
</span><span data-line="25">    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="26">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="27">    <span class="n">hobbies</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="28">    <span class="n">age</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span data-line="29">    <span class="n">birthday</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">]</span>
</span><span data-line="30">    <span class="n">pets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Pet</span><span class="p">]</span>
</span><span data-line="31">    <span class="n">assets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
</span><span data-line="32">
</span><span data-line="33">
</span><span data-line="34"><span class="k">class</span> <span class="nc">PetFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Pet</span><span class="p">]):</span>
</span><span data-line="35">    <span class="n">name</span> <span class="o">=</span> <span class="n">Use</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">])</span>
</span><span data-line="36">    <span class="n">species</span> <span class="o">=</span> <span class="n">Use</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">Species</span><span class="p">))</span>
</span><span data-line="37">
</span><span data-line="38">
</span><span data-line="39"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="40">    <span class="n">pets</span> <span class="o">=</span> <span class="n">Use</span><span class="p">(</span><span class="n">PetFactory</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span data-line="41">
</span><span data-line="42">
</span><span data-line="43"><span class="k">def</span> <span class="nf">test_pet_choices</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="44">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="45">
</span><span data-line="46">    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</span><span data-line="47">    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">pet</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pet</span> <span class="ow">in</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>The <a class="reference internal" href="../reference/fields.html#polyfactory.fields.Use" title="polyfactory.fields.Use"><code class="xref py py-class docutils literal notranslate"><span class="pre">Use</span></code></a> class is merely a semantic abstraction that makes the factory cleaner and simpler
to understand, you can in fact use any callable (including classes) as values for a factory’s attribute directly, and
these will be invoked at build-time. Thus, you could for example re-write the above PetFactory like so:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Using simple lambda functions to declare custom fields</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span data-line="4"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
</span><span data-line="5"><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="6">
</span><span data-line="7"><span class="kn">from</span> <span class="nn">polyfactory</span> <span class="kn">import</span> <span class="n">Use</span>
</span><span data-line="8"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">DataclassFactory</span>
</span><span data-line="9">
</span><span data-line="10">
</span><span data-line="11"><span class="k">class</span> <span class="nc">Species</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
</span><span data-line="12">    <span class="n">CAT</span> <span class="o">=</span> <span class="s2">&quot;Cat&quot;</span>
</span><span data-line="13">    <span class="n">DOG</span> <span class="o">=</span> <span class="s2">&quot;Dog&quot;</span>
</span><span data-line="14">
</span><span data-line="15">
</span><span data-line="16"><span class="nd">@dataclass</span>
</span><span data-line="17"><span class="k">class</span> <span class="nc">Pet</span><span class="p">:</span>
</span><span data-line="18">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="19">    <span class="n">species</span><span class="p">:</span> <span class="n">Species</span>
</span><span data-line="20">    <span class="n">sound</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="21">
</span><span data-line="22">
</span><span data-line="23"><span class="nd">@dataclass</span>
</span><span data-line="24"><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
</span><span data-line="25">    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="26">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="27">    <span class="n">hobbies</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="28">    <span class="n">age</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span data-line="29">    <span class="n">birthday</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">]</span>
</span><span data-line="30">    <span class="n">pets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Pet</span><span class="p">]</span>
</span><span data-line="31">    <span class="n">assets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
</span><span data-line="32">
</span><span data-line="33">
</span><span data-line="34"><span class="k">class</span> <span class="nc">PetFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Pet</span><span class="p">]):</span>
</span><span data-line="35">    <span class="n">name</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">DataclassFactory</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">])</span>
</span><span data-line="36">    <span class="n">species</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">DataclassFactory</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">Species</span><span class="p">))</span>
</span><span data-line="37">
</span><span data-line="38">
</span><span data-line="39"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="40">    <span class="n">pets</span> <span class="o">=</span> <span class="n">Use</span><span class="p">(</span><span class="n">PetFactory</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span data-line="41">
</span><span data-line="42">
</span><span data-line="43"><span class="k">def</span> <span class="nf">test_pet_choices</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="44">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="45">
</span><span data-line="46">    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</span><span data-line="47">    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">pet</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pet</span> <span class="ow">in</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>Or you can use a class method, which will give you easy and nice access to the factory itself:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Using class methods to declare custom fields</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span data-line="4"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
</span><span data-line="5"><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="6">
</span><span data-line="7"><span class="kn">from</span> <span class="nn">polyfactory</span> <span class="kn">import</span> <span class="n">Use</span>
</span><span data-line="8"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">DataclassFactory</span>
</span><span data-line="9">
</span><span data-line="10">
</span><span data-line="11"><span class="k">class</span> <span class="nc">Species</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
</span><span data-line="12">    <span class="n">CAT</span> <span class="o">=</span> <span class="s2">&quot;Cat&quot;</span>
</span><span data-line="13">    <span class="n">DOG</span> <span class="o">=</span> <span class="s2">&quot;Dog&quot;</span>
</span><span data-line="14">
</span><span data-line="15">
</span><span data-line="16"><span class="nd">@dataclass</span>
</span><span data-line="17"><span class="k">class</span> <span class="nc">Pet</span><span class="p">:</span>
</span><span data-line="18">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="19">    <span class="n">species</span><span class="p">:</span> <span class="n">Species</span>
</span><span data-line="20">    <span class="n">sound</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="21">
</span><span data-line="22">
</span><span data-line="23"><span class="nd">@dataclass</span>
</span><span data-line="24"><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
</span><span data-line="25">    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="26">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="27">    <span class="n">hobbies</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="28">    <span class="n">age</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span data-line="29">    <span class="n">birthday</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">]</span>
</span><span data-line="30">    <span class="n">pets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Pet</span><span class="p">]</span>
</span><span data-line="31">    <span class="n">assets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
</span><span data-line="32">
</span><span data-line="33">
</span><span data-line="34"><span class="k">class</span> <span class="nc">PetFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Pet</span><span class="p">]):</span>
</span><span data-line="35">    <span class="nd">@classmethod</span>
</span><span data-line="36">    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span data-line="37">        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">])</span>
</span><span data-line="38">
</span><span data-line="39">    <span class="nd">@classmethod</span>
</span><span data-line="40">    <span class="k">def</span> <span class="nf">species</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span data-line="41">        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">Species</span><span class="p">))</span>
</span><span data-line="42">
</span><span data-line="43">
</span><span data-line="44"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="45">    <span class="n">pets</span> <span class="o">=</span> <span class="n">Use</span><span class="p">(</span><span class="n">PetFactory</span><span class="o">.</span><span class="n">batch</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span data-line="46">
</span><span data-line="47">
</span><span data-line="48"><span class="k">def</span> <span class="nf">test_pet_choices</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="49">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="50">
</span><span data-line="51">    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</span><span data-line="52">    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">pet</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">pet</span> <span class="ow">in</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">pets</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the above examples used <code class="docutils literal notranslate"><span class="pre">DataclassFactory.__random__.choice</span></code>, and this is intentional. While you can use
<code class="docutils literal notranslate"><span class="pre">random.choice</span></code> or any other function exported from the stdlib random library, the factory class has its own instance
of <code class="docutils literal notranslate"><span class="pre">random.Random</span></code> attached under <code class="docutils literal notranslate"><span class="pre">cls.__random__</span></code>. This instance can be affected by random seeding in several ways, e.g.
calling the factory seeding method, which will be scoped only to this instance. Thus, for consistent results when seeding
randomness, its important to use the factory <code class="docutils literal notranslate"><span class="pre">random.Random</span></code> instance rather than the global one from the stdlib.</p>
</div>
</section>
<section id="the-ignore-field">
<h2>The <code class="docutils literal notranslate"><span class="pre">Ignore</span></code> Field<a class="headerlink" href="#the-ignore-field" title="Permalink to this heading">¶</a></h2>
<p><a class="reference internal" href="../reference/fields.html#polyfactory.fields.Ignore" title="polyfactory.fields.Ignore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ignore</span></code></a> is used to designate an attribute as ignored, which means it will be completely
ignored by the factory:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Using the <code class="docutils literal notranslate"><span class="pre">Ignore</span></code> field</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypedDict</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span> <span class="nn">polyfactory</span> <span class="kn">import</span> <span class="n">Ignore</span>
</span><span data-line="4"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">TypedDictFactory</span>
</span><span data-line="5">
</span><span data-line="6">
</span><span data-line="7"><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span data-line="8">    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="9">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="10">
</span><span data-line="11">
</span><span data-line="12"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">TypedDictFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="13">    <span class="nb">id</span> <span class="o">=</span> <span class="n">Ignore</span><span class="p">()</span>
</span><span data-line="14">
</span><span data-line="15">
</span><span data-line="16"><span class="k">def</span> <span class="nf">test_id_is_ignored</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="17">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="18">
</span><span data-line="19">    <span class="k">assert</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</span><span data-line="20">    <span class="k">assert</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
</span></pre></div>
</div>
</div>
</section>
<section id="the-require-field">
<h2>The <code class="docutils literal notranslate"><span class="pre">Require</span></code> Field<a class="headerlink" href="#the-require-field" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../reference/fields.html#polyfactory.fields.Require" title="polyfactory.fields.Require"><code class="xref py py-class docutils literal notranslate"><span class="pre">Require</span></code></a> class is used to designate a given attribute as a required kwarg. This means that the
factory will require passing a value for this attribute as a kwarg to the build method, or an exception will be raised:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Using the <code class="docutils literal notranslate"><span class="pre">Require</span></code> field</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypedDict</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">import</span> <span class="nn">pytest</span>
</span><span data-line="4">
</span><span data-line="5"><span class="kn">from</span> <span class="nn">polyfactory</span> <span class="kn">import</span> <span class="n">Require</span>
</span><span data-line="6"><span class="kn">from</span> <span class="nn">polyfactory.exceptions</span> <span class="kn">import</span> <span class="n">MissingBuildKwargException</span>
</span><span data-line="7"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">TypedDictFactory</span>
</span><span data-line="8">
</span><span data-line="9">
</span><span data-line="10"><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span data-line="11">    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="12">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="13">
</span><span data-line="14">
</span><span data-line="15"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">TypedDictFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="16">    <span class="nb">id</span> <span class="o">=</span> <span class="n">Require</span><span class="p">()</span>
</span><span data-line="17">
</span><span data-line="18">
</span><span data-line="19"><span class="k">def</span> <span class="nf">test_id_is_required</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="20">    <span class="c1"># this will not raise an exception</span>
</span><span data-line="21">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="22">
</span><span data-line="23">    <span class="k">assert</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</span><span data-line="24">    <span class="k">assert</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span data-line="25">
</span><span data-line="26">    <span class="c1"># but when no kwarg is passed, an exception will be raised:</span>
</span><span data-line="27">    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">MissingBuildKwargException</span><span class="p">):</span>
</span><span data-line="28">        <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span></pre></div>
</div>
</div>
</section>
<section id="the-postgenerated-field">
<h2>The <code class="docutils literal notranslate"><span class="pre">PostGenerated</span></code> Field<a class="headerlink" href="#the-postgenerated-field" title="Permalink to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../reference/fields.html#polyfactory.fields.PostGenerated" title="polyfactory.fields.PostGenerated"><code class="xref py py-class docutils literal notranslate"><span class="pre">PostGenerated</span></code></a> class allows for post generating fields based on already generated
values of other (non post generated) fields. In most cases this pattern is best avoided, but for the few valid cases
the PostGenerated helper is provided. For example:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Using the <code class="docutils literal notranslate"><span class="pre">PostGenerated</span></code> field</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span data-line="3"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span>
</span><span data-line="4">
</span><span data-line="5"><span class="kn">from</span> <span class="nn">polyfactory</span> <span class="kn">import</span> <span class="n">PostGenerated</span>
</span><span data-line="6"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">DataclassFactory</span>
</span><span data-line="7">
</span><span data-line="8">
</span><span data-line="9"><span class="k">def</span> <span class="nf">add_timedelta</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
</span><span data-line="10">    <span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="11">    <span class="k">return</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;from_dt&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">delta</span>
</span><span data-line="12">
</span><span data-line="13">
</span><span data-line="14"><span class="nd">@dataclass</span>
</span><span data-line="15"><span class="k">class</span> <span class="nc">DatetimeRange</span><span class="p">:</span>
</span><span data-line="16">    <span class="n">to_dt</span><span class="p">:</span> <span class="n">datetime</span>
</span><span data-line="17">    <span class="n">from_dt</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
</span><span data-line="18">
</span><span data-line="19">
</span><span data-line="20"><span class="k">class</span> <span class="nc">DatetimeRangeFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">DatetimeRange</span><span class="p">]):</span>
</span><span data-line="21">    <span class="n">to_dt</span> <span class="o">=</span> <span class="n">PostGenerated</span><span class="p">(</span><span class="n">add_timedelta</span><span class="p">)</span>
</span><span data-line="22">
</span><span data-line="23">
</span><span data-line="24"><span class="k">def</span> <span class="nf">test_post_generated</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="25">    <span class="n">date_range_instance</span> <span class="o">=</span> <span class="n">DatetimeRangeFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="26">    <span class="k">assert</span> <span class="n">date_range_instance</span><span class="o">.</span><span class="n">to_dt</span> <span class="o">==</span> <span class="n">date_range_instance</span><span class="o">.</span><span class="n">from_dt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>The signature for use is: <code class="docutils literal notranslate"><span class="pre">cb:</span> <span class="pre">Callable,</span> <span class="pre">*args,</span> <span class="pre">**defaults</span></code>  it can receive any sync callable. The signature for the
callable should be: <code class="docutils literal notranslate"><span class="pre">name:</span> <span class="pre">str,</span> <span class="pre">values:</span> <span class="pre">dict[str,</span> <span class="pre">Any],</span> <span class="pre">*args,</span> <span class="pre">**defaults</span></code>. The already generated values are mapped by
name in the values dictionary.</p>
</section>
<section id="factories-as-fields">
<h2>Factories as Fields<a class="headerlink" href="#factories-as-fields" title="Permalink to this heading">¶</a></h2>
<p>Factories themselves can be used as fields. In this usage, build parameters will be passed to the declared factory.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Using a factory as a field</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
</span><span data-line="4"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>
</span><span data-line="5"><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="6">
</span><span data-line="7"><span class="kn">from</span> <span class="nn">polyfactory.factories</span> <span class="kn">import</span> <span class="n">DataclassFactory</span>
</span><span data-line="8">
</span><span data-line="9">
</span><span data-line="10"><span class="k">class</span> <span class="nc">Species</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
</span><span data-line="11">    <span class="n">CAT</span> <span class="o">=</span> <span class="s2">&quot;Cat&quot;</span>
</span><span data-line="12">    <span class="n">DOG</span> <span class="o">=</span> <span class="s2">&quot;Dog&quot;</span>
</span><span data-line="13">
</span><span data-line="14">
</span><span data-line="15"><span class="nd">@dataclass</span>
</span><span data-line="16"><span class="k">class</span> <span class="nc">Pet</span><span class="p">:</span>
</span><span data-line="17">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="18">    <span class="n">species</span><span class="p">:</span> <span class="n">Species</span>
</span><span data-line="19">    <span class="n">sound</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="20">
</span><span data-line="21">
</span><span data-line="22"><span class="nd">@dataclass</span>
</span><span data-line="23"><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
</span><span data-line="24">    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="25">    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="26">    <span class="n">hobbies</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="27">    <span class="n">age</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</span><span data-line="28">    <span class="n">birthday</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">]</span>
</span><span data-line="29">    <span class="n">pet</span><span class="p">:</span> <span class="n">Pet</span>
</span><span data-line="30">    <span class="n">assets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>
</span><span data-line="31">
</span><span data-line="32">
</span><span data-line="33"><span class="k">class</span> <span class="nc">PetFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Pet</span><span class="p">]):</span>
</span><span data-line="34">    <span class="n">name</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">DataclassFactory</span><span class="o">.</span><span class="n">__random__</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">])</span>
</span><span data-line="35">
</span><span data-line="36">
</span><span data-line="37"><span class="k">class</span> <span class="nc">PersonFactory</span><span class="p">(</span><span class="n">DataclassFactory</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="38">    <span class="n">pet</span> <span class="o">=</span> <span class="n">PetFactory</span>
</span><span data-line="39">
</span><span data-line="40">
</span><span data-line="41"><span class="k">def</span> <span class="nf">test_subfactory</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="42">    <span class="n">person_instance</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span data-line="43">
</span><span data-line="44">    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">person_instance</span><span class="o">.</span><span class="n">pet</span><span class="p">,</span> <span class="n">Pet</span><span class="p">)</span>
</span><span data-line="45">    <span class="k">assert</span> <span class="n">person_instance</span><span class="o">.</span><span class="n">pet</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Ralph&quot;</span><span class="p">,</span> <span class="s2">&quot;Roxy&quot;</span><span class="p">]</span>
</span><span data-line="46">
</span><span data-line="47">    <span class="n">person_instance_with_pet_name</span> <span class="o">=</span> <span class="n">PersonFactory</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">pet</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Winston&quot;</span><span class="p">})</span>
</span><span data-line="48">    <span class="k">assert</span> <span class="n">person_instance_with_pet_name</span><span class="o">.</span><span class="n">pet</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Winston&quot;</span>
</span></pre></div>
</div>
</div>
</section>
</section>

        </article>
        <button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button>
        
        <div class="navigation flex print:hidden">
  <div class="navigation-prev">
    <a href="configuration.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span>
        
        <div class="title">Factory Configuration</div>
        
      </div>
    </a>
  </div>
  <div class="navigation-next">
    <a href="decorators.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">The <code class="docutils literal notranslate"><span class="pre">post_generated</span></code> decorator</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div>
</div>
        
      </div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2024, Litestar Organization</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
  <a href="https://github.com/litestar-org/polyfactory" aria-label="GitHub"><i class="i-simpleicons github"></i></a>
  <a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)"><i class="i-simpleicons x-twitter"></i></a>
  <a href="https://discord.gg/litestar" aria-label="Discord"><i class="i-simpleicons discord"></i></a>
  <a href="https://www.reddit.com/r/LitestarAPI" aria-label="Reddit"><i class="i-simpleicons reddit"></i></a>
</div>
    </div>
  </div>
</footer></div>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=759f69be"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/litestar-theme.js?v=ab2dcc9e"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script src="../_static/design-tabs.js?v=36754332"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/shibuya.js?v=5f0e4c24"></script>
      <script src="../_static/versioning.js"></script>
    
</body>
</html>