
  <!DOCTYPE html>
<html lang="en" data-accent-color="amber" data-content_root="">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>random - Polyfactory</title>
    <link rel="shortcut icon" href="../_static/favicon.svg"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

  <script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(sessionStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=aecf457f" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=f2d5353f" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/litestar-sphinx-theme.css?v=9fce248e" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="random"/>
<meta name="twitter:card" content="summary"/>
<meta property="og:image" content="_static/logo-light.svg"/>
  </head>
<body><div class="document"><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand mr-4" href="/">
      <img class="light-logo" src="../_static/logo-light.svg" alt="polyfactory" height="28" />
      <img class="dark-logo" src="../_static/logo-dark.svg" alt="polyfactory" height="28" />
      <strong>polyfactory</strong>
    </a>
    <div class="sy-head-links" id="NavLinks">
      <nav class="sy-head-nav">

<ul><li class="link"><a href="../index.html">Home</a></li>
      <li class="link"><button type="button">
            <span>Community</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="../contribution-guide.html">
                <span>Contributing</span>
                <small>Learn how to contribute to the Type Lens project</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file">
                <span>Code of Conduct</span>
                <small>Review the etiquette for interacting with the Litestar community</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file#security-ov-file">
                <span>Security</span>
                <small>Overview of Litestar's security protocols</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>About</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="https://litestar.dev/about/organization">
                <span>Litestar Organization</span>
                <small>Details about the Litestar organization</small>
              </a></li><li><a href="../releases.html">
                <span>Releases</span>
                <small>Explore the release process, versioning, and deprecation policy for Litestar</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>Release notes</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="../changelog.html">
                <span>Changelog</span>
                <small>All changes in the current major version</small>
              </a></li></ul>
      </li>
      <li class="link"><button type="button">
            <span>Help</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul>
          <li><a href="https://discord.gg/litestar">
                <span>Discord Help Forum</span>
                <small>Dedicated Discord help forum</small>
              </a></li><li><a href="https://github.com/litestar-org/polyfactory/discussions">
                <span>GitHub Discussions</span>
                <small>GitHub Discussions</small>
              </a></li><li><a href="https://stackoverflow.com/questions/tagged/polyfactory">
                <span>Stack Overflow</span>
                <small>We monitor the <code><b>polyfactory</b></code> tag on Stack Overflow</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/Litestar-Org">
            <span>Sponsor</span>
            
          </a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden">
        
<form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form>
        
  <div class="nav-versions">
    <button type="button" aria-label="Versions">
      <span class="md:hidden">Versions</span>
      <span class="hidden md:inline">latest</span>
      <i class="i-lucide chevron-down"></i>
    </button>
    <div class="nav-versions-choices">
      <ul><li><a href="/latest">latest</a></li><li><a href="/main">development</a></li></ul></div>
  </div>
        
        <div class="sy-head-socials flex items-center">
    <a href="https://github.com/litestar-org/polyfactory" aria-label="GitHub">
      <i class="i-simpleicons github"></i>
    </a>
  <a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
    <i class="i-simpleicons x-twitter"></i>
  </a>
    <a href="https://discord.gg/litestar" aria-label="Discord">
      <i class="i-simpleicons discord"></i>
    </a>
</div>
      </div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden">
      <button class="js-theme theme-switch flex items-center"
        data-aria-auto="Switch to light color mode"
        data-aria-light="Switch to dark color mode"
        data-aria-dark="Switch to auto color mode">
        <i class="i-lucide theme-icon"></i>
      </button>
      <button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="NavLinks" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
<div class="sidebar-links">
  <ul>
    <li><a class="icon-link" href="https://github.com/orgs/litestar-org/discussions">
  <span class="icon">
    <svg viewBox="0 0 24 24" fill="none">
      <path fill="var(--accent-9)" fill-rule="evenodd" clip-rule="evenodd" d="M11 5a6 6 0 0 0-4.687 9.746c.215.27.315.62.231.954l-.514 2.058a1 1 0 0 0 1.485 1.1l2.848-1.71c.174-.104.374-.15.576-.148H13a6 6 0 0 0 0-12h-2Z"/>
      <circle fill="white" cx="12" cy="11" r="1"/>
      <circle fill="white" cx="9" cy="11" r="1"/>
      <circle fill="white" cx="15" cy="11" r="1"/>
    </svg>
  </span>
  <span class="text">Discussion</span>
</a></li>
  </ul>
</div>

        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/declaring_factories.html">Declaring Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/library_factories/index.html">Polyfactory Factories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/library_factories/sqlalchemy_factory.html">SQLAlchemyFactory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/configuration.html">Factory Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/fields.html">Factory Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/decorators.html">The <code class="docutils literal notranslate"><span class="pre">post_generated</span></code> decorator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/fixtures.html">Pytest fixtures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/handling_custom_types.html">Handling Custom Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/model_coverage.html">Model coverage generation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/constants.html">constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/exceptions.html">exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/factories/index.html">factories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/base.html">base_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/dataclass_factory.html">dataclass_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/typed_dict_factory.html">typed_dict_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/pydantic_factory.html">pydantic_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/msgspec_factory.html">msgspec_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/odmantic_odm_factory.html">odmantic_odm_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/beanie_odm_factory.html">beanie_odm_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/attrs_factory.html">attrs_factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/factories/sqlalchemy_factory.html">sqlalchemy_factory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/field_meta.html">field_meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/fields.html">fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/decorators.html">decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/persistence.html">persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pytest_plugin.html">pytest_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/value_generators/index.html">value_generators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/complex_types.html">complex_types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_collections.html">constrained_collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_dates.html">constrained_dates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_numbers.html">constrained_numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/constrained_strings.html">constrained_strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/value_generators/primitives.html">primitives</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribution-guide.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=user%3Alitestar-org+state%3Aopen+label%3A%22good+first+issue%22+++no%3Aassignee+repo%3A%22polyfactory%22&amp;type=issues">Available Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/litestar-org/.github?tab=coc-ov-file#readme">Code of Conduct</a></li>
</ul>

        </div>
      </div>
      
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><a class="js-repo-stats repo-stats flex items-center" href="https://github.com/litestar-org/polyfactory"
  data-type="github" data-user="litestar-org" data-repo="polyfactory">
  <span class="w-8 flex items-center justify-around shrink-0 text-3xl">
    <i class="i-simpleicons github"></i>
  </span>
  <span class="flex-grow px-2">
    <span>litestar-org/polyfactory</span>
    <span class="flex text-sm repo-stats-count">
      <span class="flex items-center pr-3">
        <i class="i-lucide star"></i>
        <strong class="js-repo-stars ml-1">0</strong>
      </span>
      <span class="flex items-center">
        <i class="i-lucide git-fork"></i>
        <strong class="js-repo-forks ml-1">0</strong>
      </span>
    </span>
  </span>
</a><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div>
    </div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
    <div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList">
      
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">polyfactory</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li>
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Module code</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li>
      
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">random</strong>
        <meta itemprop="position" content="3" />
      </li>
      
      
    </ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div>
    <div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <h1>Source code for random</h1><div class="highlight"><pre>
<span></span><span data-line="1"><span class="sd">&quot;&quot;&quot;Random variable generators.</span>
</span><span data-line="2">
</span><span data-line="3"><span class="sd">    bytes</span>
</span><span data-line="4"><span class="sd">    -----</span>
</span><span data-line="5"><span class="sd">           uniform bytes (values between 0 and 255)</span>
</span><span data-line="6">
</span><span data-line="7"><span class="sd">    integers</span>
</span><span data-line="8"><span class="sd">    --------</span>
</span><span data-line="9"><span class="sd">           uniform within range</span>
</span><span data-line="10">
</span><span data-line="11"><span class="sd">    sequences</span>
</span><span data-line="12"><span class="sd">    ---------</span>
</span><span data-line="13"><span class="sd">           pick random element</span>
</span><span data-line="14"><span class="sd">           pick random sample</span>
</span><span data-line="15"><span class="sd">           pick weighted random sample</span>
</span><span data-line="16"><span class="sd">           generate random permutation</span>
</span><span data-line="17">
</span><span data-line="18"><span class="sd">    distributions on the real line:</span>
</span><span data-line="19"><span class="sd">    ------------------------------</span>
</span><span data-line="20"><span class="sd">           uniform</span>
</span><span data-line="21"><span class="sd">           triangular</span>
</span><span data-line="22"><span class="sd">           normal (Gaussian)</span>
</span><span data-line="23"><span class="sd">           lognormal</span>
</span><span data-line="24"><span class="sd">           negative exponential</span>
</span><span data-line="25"><span class="sd">           gamma</span>
</span><span data-line="26"><span class="sd">           beta</span>
</span><span data-line="27"><span class="sd">           pareto</span>
</span><span data-line="28"><span class="sd">           Weibull</span>
</span><span data-line="29">
</span><span data-line="30"><span class="sd">    distributions on the circle (angles 0 to 2pi)</span>
</span><span data-line="31"><span class="sd">    ---------------------------------------------</span>
</span><span data-line="32"><span class="sd">           circular uniform</span>
</span><span data-line="33"><span class="sd">           von Mises</span>
</span><span data-line="34">
</span><span data-line="35"><span class="sd">    discrete distributions</span>
</span><span data-line="36"><span class="sd">    ----------------------</span>
</span><span data-line="37"><span class="sd">           binomial</span>
</span><span data-line="38">
</span><span data-line="39">
</span><span data-line="40"><span class="sd">General notes on the underlying Mersenne Twister core generator:</span>
</span><span data-line="41">
</span><span data-line="42"><span class="sd">* The period is 2**19937-1.</span>
</span><span data-line="43"><span class="sd">* It is one of the most extensively tested generators in existence.</span>
</span><span data-line="44"><span class="sd">* The random() method is implemented in C, executes in a single Python step,</span>
</span><span data-line="45"><span class="sd">  and is, therefore, threadsafe.</span>
</span><span data-line="46">
</span><span data-line="47"><span class="sd">&quot;&quot;&quot;</span>
</span><span data-line="48">
</span><span data-line="49"><span class="c1"># Translated by Guido van Rossum from C source provided by</span>
</span><span data-line="50"><span class="c1"># Adrian Baddeley.  Adapted by Raymond Hettinger for use with</span>
</span><span data-line="51"><span class="c1"># the Mersenne Twister  and os.urandom() core generators.</span>
</span><span data-line="52">
</span><span data-line="53"><span class="kn">from</span> <span class="nn">warnings</span> <span class="kn">import</span> <span class="n">warn</span> <span class="k">as</span> <span class="n">_warn</span>
</span><span data-line="54"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span> <span class="k">as</span> <span class="n">_log</span><span class="p">,</span> <span class="n">exp</span> <span class="k">as</span> <span class="n">_exp</span><span class="p">,</span> <span class="n">pi</span> <span class="k">as</span> <span class="n">_pi</span><span class="p">,</span> <span class="n">e</span> <span class="k">as</span> <span class="n">_e</span><span class="p">,</span> <span class="n">ceil</span> <span class="k">as</span> <span class="n">_ceil</span>
</span><span data-line="55"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span> <span class="k">as</span> <span class="n">_sqrt</span><span class="p">,</span> <span class="n">acos</span> <span class="k">as</span> <span class="n">_acos</span><span class="p">,</span> <span class="n">cos</span> <span class="k">as</span> <span class="n">_cos</span><span class="p">,</span> <span class="n">sin</span> <span class="k">as</span> <span class="n">_sin</span>
</span><span data-line="56"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">tau</span> <span class="k">as</span> <span class="n">TWOPI</span><span class="p">,</span> <span class="n">floor</span> <span class="k">as</span> <span class="n">_floor</span><span class="p">,</span> <span class="n">isfinite</span> <span class="k">as</span> <span class="n">_isfinite</span>
</span><span data-line="57"><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">lgamma</span> <span class="k">as</span> <span class="n">_lgamma</span><span class="p">,</span> <span class="n">fabs</span> <span class="k">as</span> <span class="n">_fabs</span><span class="p">,</span> <span class="n">log2</span> <span class="k">as</span> <span class="n">_log2</span>
</span><span data-line="58"><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">urandom</span> <span class="k">as</span> <span class="n">_urandom</span>
</span><span data-line="59"><span class="kn">from</span> <span class="nn">_collections_abc</span> <span class="kn">import</span> <span class="n">Sequence</span> <span class="k">as</span> <span class="n">_Sequence</span>
</span><span data-line="60"><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">index</span> <span class="k">as</span> <span class="n">_index</span>
</span><span data-line="61"><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">accumulate</span> <span class="k">as</span> <span class="n">_accumulate</span><span class="p">,</span> <span class="n">repeat</span> <span class="k">as</span> <span class="n">_repeat</span>
</span><span data-line="62"><span class="kn">from</span> <span class="nn">bisect</span> <span class="kn">import</span> <span class="n">bisect</span> <span class="k">as</span> <span class="n">_bisect</span>
</span><span data-line="63"><span class="kn">import</span> <span class="nn">os</span> <span class="k">as</span> <span class="nn">_os</span>
</span><span data-line="64"><span class="kn">import</span> <span class="nn">_random</span>
</span><span data-line="65">
</span><span data-line="66"><span class="k">try</span><span class="p">:</span>
</span><span data-line="67">    <span class="c1"># hashlib is pretty heavy to load, try lean internal module first</span>
</span><span data-line="68">    <span class="kn">from</span> <span class="nn">_sha2</span> <span class="kn">import</span> <span class="n">sha512</span> <span class="k">as</span> <span class="n">_sha512</span>
</span><span data-line="69"><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
</span><span data-line="70">    <span class="c1"># fallback to official implementation</span>
</span><span data-line="71">    <span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">sha512</span> <span class="k">as</span> <span class="n">_sha512</span>
</span><span data-line="72">
</span><span data-line="73"><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span data-line="74">    <span class="s2">&quot;Random&quot;</span><span class="p">,</span>
</span><span data-line="75">    <span class="s2">&quot;SystemRandom&quot;</span><span class="p">,</span>
</span><span data-line="76">    <span class="s2">&quot;betavariate&quot;</span><span class="p">,</span>
</span><span data-line="77">    <span class="s2">&quot;binomialvariate&quot;</span><span class="p">,</span>
</span><span data-line="78">    <span class="s2">&quot;choice&quot;</span><span class="p">,</span>
</span><span data-line="79">    <span class="s2">&quot;choices&quot;</span><span class="p">,</span>
</span><span data-line="80">    <span class="s2">&quot;expovariate&quot;</span><span class="p">,</span>
</span><span data-line="81">    <span class="s2">&quot;gammavariate&quot;</span><span class="p">,</span>
</span><span data-line="82">    <span class="s2">&quot;gauss&quot;</span><span class="p">,</span>
</span><span data-line="83">    <span class="s2">&quot;getrandbits&quot;</span><span class="p">,</span>
</span><span data-line="84">    <span class="s2">&quot;getstate&quot;</span><span class="p">,</span>
</span><span data-line="85">    <span class="s2">&quot;lognormvariate&quot;</span><span class="p">,</span>
</span><span data-line="86">    <span class="s2">&quot;normalvariate&quot;</span><span class="p">,</span>
</span><span data-line="87">    <span class="s2">&quot;paretovariate&quot;</span><span class="p">,</span>
</span><span data-line="88">    <span class="s2">&quot;randbytes&quot;</span><span class="p">,</span>
</span><span data-line="89">    <span class="s2">&quot;randint&quot;</span><span class="p">,</span>
</span><span data-line="90">    <span class="s2">&quot;random&quot;</span><span class="p">,</span>
</span><span data-line="91">    <span class="s2">&quot;randrange&quot;</span><span class="p">,</span>
</span><span data-line="92">    <span class="s2">&quot;sample&quot;</span><span class="p">,</span>
</span><span data-line="93">    <span class="s2">&quot;seed&quot;</span><span class="p">,</span>
</span><span data-line="94">    <span class="s2">&quot;setstate&quot;</span><span class="p">,</span>
</span><span data-line="95">    <span class="s2">&quot;shuffle&quot;</span><span class="p">,</span>
</span><span data-line="96">    <span class="s2">&quot;triangular&quot;</span><span class="p">,</span>
</span><span data-line="97">    <span class="s2">&quot;uniform&quot;</span><span class="p">,</span>
</span><span data-line="98">    <span class="s2">&quot;vonmisesvariate&quot;</span><span class="p">,</span>
</span><span data-line="99">    <span class="s2">&quot;weibullvariate&quot;</span><span class="p">,</span>
</span><span data-line="100"><span class="p">]</span>
</span><span data-line="101">
</span><span data-line="102"><span class="n">NV_MAGICCONST</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">_exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="n">_sqrt</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
</span><span data-line="103"><span class="n">LOG4</span> <span class="o">=</span> <span class="n">_log</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span>
</span><span data-line="104"><span class="n">SG_MAGICCONST</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="n">_log</span><span class="p">(</span><span class="mf">4.5</span><span class="p">)</span>
</span><span data-line="105"><span class="n">BPF</span> <span class="o">=</span> <span class="mi">53</span>        <span class="c1"># Number of bits in a float</span>
</span><span data-line="106"><span class="n">RECIP_BPF</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="o">-</span><span class="n">BPF</span>
</span><span data-line="107"><span class="n">_ONE</span> <span class="o">=</span> <span class="mi">1</span>
</span><span data-line="108">
</span><span data-line="109">
</span><span data-line="110"><span class="k">class</span> <span class="nc">Random</span><span class="p">(</span><span class="n">_random</span><span class="o">.</span><span class="n">Random</span><span class="p">):</span>
</span><span data-line="111"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Random number generator base class used by bound module functions.</span>
</span><span data-line="112">
</span><span data-line="113"><span class="sd">    Used to instantiate instances of Random to get generators that don&#39;t</span>
</span><span data-line="114"><span class="sd">    share state.</span>
</span><span data-line="115">
</span><span data-line="116"><span class="sd">    Class Random can also be subclassed if you want to use a different basic</span>
</span><span data-line="117"><span class="sd">    generator of your own devising: in that case, override the following</span>
</span><span data-line="118"><span class="sd">    methods:  random(), seed(), getstate(), and setstate().</span>
</span><span data-line="119"><span class="sd">    Optionally, implement a getrandbits() method so that randrange()</span>
</span><span data-line="120"><span class="sd">    can cover arbitrarily large ranges.</span>
</span><span data-line="121">
</span><span data-line="122"><span class="sd">    &quot;&quot;&quot;</span>
</span><span data-line="123">
</span><span data-line="124">    <span class="n">VERSION</span> <span class="o">=</span> <span class="mi">3</span>     <span class="c1"># used by getstate/setstate</span>
</span><span data-line="125">
</span><span data-line="126">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span data-line="127"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an instance.</span>
</span><span data-line="128">
</span><span data-line="129"><span class="sd">        Optional argument x controls seeding, as for Random.seed().</span>
</span><span data-line="130"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="131">
</span><span data-line="132">        <span class="bp">self</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span data-line="133">        <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span> <span class="o">=</span> <span class="kc">None</span>
</span><span data-line="134">
</span><span data-line="135">    <span class="k">def</span> <span class="nf">seed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
</span><span data-line="136"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize internal state from a seed.</span>
</span><span data-line="137">
</span><span data-line="138"><span class="sd">        The only supported seed types are None, int, float,</span>
</span><span data-line="139"><span class="sd">        str, bytes, and bytearray.</span>
</span><span data-line="140">
</span><span data-line="141"><span class="sd">        None or no argument seeds from current time or from an operating</span>
</span><span data-line="142"><span class="sd">        system specific randomness source if available.</span>
</span><span data-line="143">
</span><span data-line="144"><span class="sd">        If *a* is an int, all bits are used.</span>
</span><span data-line="145">
</span><span data-line="146"><span class="sd">        For version 2 (the default), all of the bits are used if *a* is a str,</span>
</span><span data-line="147"><span class="sd">        bytes, or bytearray.  For version 1 (provided for reproducing random</span>
</span><span data-line="148"><span class="sd">        sequences from older versions of Python), the algorithm for str and</span>
</span><span data-line="149"><span class="sd">        bytes generates a narrower range of seeds.</span>
</span><span data-line="150">
</span><span data-line="151"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="152">
</span><span data-line="153">        <span class="k">if</span> <span class="n">version</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
</span><span data-line="154">            <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin-1&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="k">else</span> <span class="n">a</span>
</span><span data-line="155">            <span class="n">x</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span> <span class="k">if</span> <span class="n">a</span> <span class="k">else</span> <span class="mi">0</span>
</span><span data-line="156">            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="nb">ord</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
</span><span data-line="157">                <span class="n">x</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1000003</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span> <span class="o">^</span> <span class="n">c</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFFFFFFFFFFFFFFFF</span>
</span><span data-line="158">            <span class="n">x</span> <span class="o">^=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span data-line="159">            <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">x</span>
</span><span data-line="160">
</span><span data-line="161">        <span class="k">elif</span> <span class="n">version</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
</span><span data-line="162">            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span data-line="163">                <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
</span><span data-line="164">            <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">_sha512</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>
</span><span data-line="165">
</span><span data-line="166">        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
</span><span data-line="167">            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;The only supported seed types are: None,</span><span class="se">\n</span><span class="s1">&#39;</span>
</span><span data-line="168">                            <span class="s1">&#39;int, float, str, bytes, and bytearray.&#39;</span><span class="p">)</span>
</span><span data-line="169">
</span><span data-line="170">        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span data-line="171">        <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span> <span class="o">=</span> <span class="kc">None</span>
</span><span data-line="172">
</span><span data-line="173">    <span class="k">def</span> <span class="nf">getstate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span data-line="174"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return internal state; can be passed to setstate() later.&quot;&quot;&quot;</span>
</span><span data-line="175">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">VERSION</span><span class="p">,</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">getstate</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span>
</span><span data-line="176">
</span><span data-line="177">    <span class="k">def</span> <span class="nf">setstate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
</span><span data-line="178"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Restore internal state from object returned by getstate().&quot;&quot;&quot;</span>
</span><span data-line="179">        <span class="n">version</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span data-line="180">        <span class="k">if</span> <span class="n">version</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span data-line="181">            <span class="n">version</span><span class="p">,</span> <span class="n">internalstate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span> <span class="o">=</span> <span class="n">state</span>
</span><span data-line="182">            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setstate</span><span class="p">(</span><span class="n">internalstate</span><span class="p">)</span>
</span><span data-line="183">        <span class="k">elif</span> <span class="n">version</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span data-line="184">            <span class="n">version</span><span class="p">,</span> <span class="n">internalstate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span> <span class="o">=</span> <span class="n">state</span>
</span><span data-line="185">            <span class="c1"># In version 2, the state was saved as signed ints, which causes</span>
</span><span data-line="186">            <span class="c1">#   inconsistencies between 32/64-bit systems. The state is</span>
</span><span data-line="187">            <span class="c1">#   really unsigned 32-bit ints, so we convert negative ints from</span>
</span><span data-line="188">            <span class="c1">#   version 2 to positive longs for version 3.</span>
</span><span data-line="189">            <span class="k">try</span><span class="p">:</span>
</span><span data-line="190">                <span class="n">internalstate</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">**</span> <span class="mi">32</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">internalstate</span><span class="p">)</span>
</span><span data-line="191">            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span data-line="192">                <span class="k">raise</span> <span class="ne">TypeError</span> <span class="kn">from</span> <span class="nn">e</span>
</span><span data-line="193">            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">setstate</span><span class="p">(</span><span class="n">internalstate</span><span class="p">)</span>
</span><span data-line="194">        <span class="k">else</span><span class="p">:</span>
</span><span data-line="195">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;state with version </span><span class="si">%s</span><span class="s2"> passed to &quot;</span>
</span><span data-line="196">                             <span class="s2">&quot;Random.setstate() of version </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
</span><span data-line="197">                             <span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VERSION</span><span class="p">))</span>
</span><span data-line="198">
</span><span data-line="199">
</span><span data-line="200">    <span class="c1">## -------------------------------------------------------</span>
</span><span data-line="201">    <span class="c1">## ---- Methods below this point do not need to be overridden or extended</span>
</span><span data-line="202">    <span class="c1">## ---- when subclassing for the purpose of using a different core generator.</span>
</span><span data-line="203">
</span><span data-line="204">
</span><span data-line="205">    <span class="c1">## -------------------- pickle support  -------------------</span>
</span><span data-line="206">
</span><span data-line="207">    <span class="c1"># Issue 17489: Since __reduce__ was defined to fix #759889 this is no</span>
</span><span data-line="208">    <span class="c1"># longer called; we leave it here because it has been here since random was</span>
</span><span data-line="209">    <span class="c1"># rewritten back in 2001 and why risk breaking something.</span>
</span><span data-line="210">    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># for pickle</span>
</span><span data-line="211">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getstate</span><span class="p">()</span>
</span><span data-line="212">
</span><span data-line="213">    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>  <span class="c1"># for pickle</span>
</span><span data-line="214">        <span class="bp">self</span><span class="o">.</span><span class="n">setstate</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span data-line="215">
</span><span data-line="216">    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span data-line="217">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">getstate</span><span class="p">()</span>
</span><span data-line="218">
</span><span data-line="219">
</span><span data-line="220">    <span class="c1">## ---- internal support method for evenly distributed integers ----</span>
</span><span data-line="221">
</span><span data-line="222">    <span class="k">def</span> <span class="nf">__init_subclass__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span data-line="223"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Control how subclasses generate random integers.</span>
</span><span data-line="224">
</span><span data-line="225"><span class="sd">        The algorithm a subclass can use depends on the random() and/or</span>
</span><span data-line="226"><span class="sd">        getrandbits() implementation available to it and determines</span>
</span><span data-line="227"><span class="sd">        whether it can generate random integers from arbitrarily large</span>
</span><span data-line="228"><span class="sd">        ranges.</span>
</span><span data-line="229"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="230">
</span><span data-line="231">        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
</span><span data-line="232">            <span class="k">if</span> <span class="s1">&#39;_randbelow&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
</span><span data-line="233">                <span class="c1"># just inherit it</span>
</span><span data-line="234">                <span class="k">break</span>
</span><span data-line="235">            <span class="k">if</span> <span class="s1">&#39;getrandbits&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
</span><span data-line="236">                <span class="bp">cls</span><span class="o">.</span><span class="n">_randbelow</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_randbelow_with_getrandbits</span>
</span><span data-line="237">                <span class="k">break</span>
</span><span data-line="238">            <span class="k">if</span> <span class="s1">&#39;random&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
</span><span data-line="239">                <span class="bp">cls</span><span class="o">.</span><span class="n">_randbelow</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_randbelow_without_getrandbits</span>
</span><span data-line="240">                <span class="k">break</span>
</span><span data-line="241">
</span><span data-line="242">    <span class="k">def</span> <span class="nf">_randbelow_with_getrandbits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span data-line="243">        <span class="s2">&quot;Return a random int in the range [0,n).  Defined for n &gt; 0.&quot;</span>
</span><span data-line="244">
</span><span data-line="245">        <span class="n">getrandbits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getrandbits</span>
</span><span data-line="246">        <span class="n">k</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
</span><span data-line="247">        <span class="n">r</span> <span class="o">=</span> <span class="n">getrandbits</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>  <span class="c1"># 0 &lt;= r &lt; 2**k</span>
</span><span data-line="248">        <span class="k">while</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">:</span>
</span><span data-line="249">            <span class="n">r</span> <span class="o">=</span> <span class="n">getrandbits</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span data-line="250">        <span class="k">return</span> <span class="n">r</span>
</span><span data-line="251">
</span><span data-line="252">    <span class="k">def</span> <span class="nf">_randbelow_without_getrandbits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">BPF</span><span class="p">):</span>
</span><span data-line="253"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a random int in the range [0,n).  Defined for n &gt; 0.</span>
</span><span data-line="254">
</span><span data-line="255"><span class="sd">        The implementation does not use getrandbits, but only random.</span>
</span><span data-line="256"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="257">
</span><span data-line="258">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="259">        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">maxsize</span><span class="p">:</span>
</span><span data-line="260">            <span class="n">_warn</span><span class="p">(</span><span class="s2">&quot;Underlying random() generator does not supply </span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span data-line="261">                <span class="s2">&quot;enough bits to choose from a population range this large.</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span data-line="262">                <span class="s2">&quot;To remove the range limitation, add a getrandbits() method.&quot;</span><span class="p">)</span>
</span><span data-line="263">            <span class="k">return</span> <span class="n">_floor</span><span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
</span><span data-line="264">        <span class="n">rem</span> <span class="o">=</span> <span class="n">maxsize</span> <span class="o">%</span> <span class="n">n</span>
</span><span data-line="265">        <span class="n">limit</span> <span class="o">=</span> <span class="p">(</span><span class="n">maxsize</span> <span class="o">-</span> <span class="n">rem</span><span class="p">)</span> <span class="o">/</span> <span class="n">maxsize</span>   <span class="c1"># int(limit * maxsize) % n == 0</span>
</span><span data-line="266">        <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="267">        <span class="k">while</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
</span><span data-line="268">            <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="269">        <span class="k">return</span> <span class="n">_floor</span><span class="p">(</span><span class="n">r</span> <span class="o">*</span> <span class="n">maxsize</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span>
</span><span data-line="270">
</span><span data-line="271">    <span class="n">_randbelow</span> <span class="o">=</span> <span class="n">_randbelow_with_getrandbits</span>
</span><span data-line="272">
</span><span data-line="273">
</span><span data-line="274">    <span class="c1">## --------------------------------------------------------</span>
</span><span data-line="275">    <span class="c1">## ---- Methods below this point generate custom distributions</span>
</span><span data-line="276">    <span class="c1">## ---- based on the methods defined above.  They do not</span>
</span><span data-line="277">    <span class="c1">## ---- directly touch the underlying generator and only</span>
</span><span data-line="278">    <span class="c1">## ---- access randomness through the methods:  random(),</span>
</span><span data-line="279">    <span class="c1">## ---- getrandbits(), or _randbelow().</span>
</span><span data-line="280">
</span><span data-line="281">
</span><span data-line="282">    <span class="c1">## -------------------- bytes methods ---------------------</span>
</span><span data-line="283">
</span><span data-line="284">    <span class="k">def</span> <span class="nf">randbytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span data-line="285"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate n random bytes.&quot;&quot;&quot;</span>
</span><span data-line="286">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getrandbits</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">)</span>
</span><span data-line="287">
</span><span data-line="288">
</span><span data-line="289">    <span class="c1">## -------------------- integer methods  -------------------</span>
</span><span data-line="290">
</span><span data-line="291">    <span class="k">def</span> <span class="nf">randrange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">_ONE</span><span class="p">):</span>
</span><span data-line="292"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Choose a random item from range(stop) or range(start, stop[, step]).</span>
</span><span data-line="293">
</span><span data-line="294"><span class="sd">        Roughly equivalent to ``choice(range(start, stop, step))`` but</span>
</span><span data-line="295"><span class="sd">        supports arbitrarily large ranges and is optimized for common cases.</span>
</span><span data-line="296">
</span><span data-line="297"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="298">
</span><span data-line="299">        <span class="c1"># This code is a bit messy to make it fast for the</span>
</span><span data-line="300">        <span class="c1"># common case while still doing adequate error checking.</span>
</span><span data-line="301">        <span class="n">istart</span> <span class="o">=</span> <span class="n">_index</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span data-line="302">        <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="303">            <span class="c1"># We don&#39;t check for &quot;step != 1&quot; because it hasn&#39;t been</span>
</span><span data-line="304">            <span class="c1"># type checked and converted to an integer yet.</span>
</span><span data-line="305">            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">_ONE</span><span class="p">:</span>
</span><span data-line="306">                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Missing a non-None stop argument&quot;</span><span class="p">)</span>
</span><span data-line="307">            <span class="k">if</span> <span class="n">istart</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="308">                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_randbelow</span><span class="p">(</span><span class="n">istart</span><span class="p">)</span>
</span><span data-line="309">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;empty range for randrange()&quot;</span><span class="p">)</span>
</span><span data-line="310">
</span><span data-line="311">        <span class="c1"># Stop argument supplied.</span>
</span><span data-line="312">        <span class="n">istop</span> <span class="o">=</span> <span class="n">_index</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
</span><span data-line="313">        <span class="n">width</span> <span class="o">=</span> <span class="n">istop</span> <span class="o">-</span> <span class="n">istart</span>
</span><span data-line="314">        <span class="n">istep</span> <span class="o">=</span> <span class="n">_index</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
</span><span data-line="315">        <span class="c1"># Fast path.</span>
</span><span data-line="316">        <span class="k">if</span> <span class="n">istep</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span data-line="317">            <span class="k">if</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="318">                <span class="k">return</span> <span class="n">istart</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_randbelow</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
</span><span data-line="319">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;empty range in randrange(</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">stop</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span data-line="320">
</span><span data-line="321">        <span class="c1"># Non-unit step argument supplied.</span>
</span><span data-line="322">        <span class="k">if</span> <span class="n">istep</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="323">            <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">+</span> <span class="n">istep</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">istep</span>
</span><span data-line="324">        <span class="k">elif</span> <span class="n">istep</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="325">            <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">+</span> <span class="n">istep</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">istep</span>
</span><span data-line="326">        <span class="k">else</span><span class="p">:</span>
</span><span data-line="327">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;zero step for randrange()&quot;</span><span class="p">)</span>
</span><span data-line="328">        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="329">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;empty range in randrange(</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">stop</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">step</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</span><span data-line="330">        <span class="k">return</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">istep</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_randbelow</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span data-line="331">
</span><span data-line="332">    <span class="k">def</span> <span class="nf">randint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span><span data-line="333"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return random integer in range [a, b], including both end points.</span>
</span><span data-line="334"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="335">
</span><span data-line="336">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="337">
</span><span data-line="338">
</span><span data-line="339">    <span class="c1">## -------------------- sequence methods  -------------------</span>
</span><span data-line="340">
</span><span data-line="341">    <span class="k">def</span> <span class="nf">choice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
</span><span data-line="342"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Choose a random element from a non-empty sequence.&quot;&quot;&quot;</span>
</span><span data-line="343">
</span><span data-line="344">        <span class="c1"># As an accommodation for NumPy, we don&#39;t use &quot;if not seq&quot;</span>
</span><span data-line="345">        <span class="c1"># because bool(numpy.array()) raises a ValueError.</span>
</span><span data-line="346">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">):</span>
</span><span data-line="347">            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;Cannot choose from an empty sequence&#39;</span><span class="p">)</span>
</span><span data-line="348">        <span class="k">return</span> <span class="n">seq</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_randbelow</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">seq</span><span class="p">))]</span>
</span><span data-line="349">
</span><span data-line="350">    <span class="k">def</span> <span class="nf">shuffle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span data-line="351"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Shuffle list x in place, and return None.&quot;&quot;&quot;</span>
</span><span data-line="352">
</span><span data-line="353">        <span class="n">randbelow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_randbelow</span>
</span><span data-line="354">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))):</span>
</span><span data-line="355">            <span class="c1"># pick an element in x[:i+1] with which to exchange x[i]</span>
</span><span data-line="356">            <span class="n">j</span> <span class="o">=</span> <span class="n">randbelow</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span data-line="357">            <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span data-line="358">
</span><span data-line="359">    <span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">population</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">counts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span data-line="360"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Chooses k unique random elements from a population sequence.</span>
</span><span data-line="361">
</span><span data-line="362"><span class="sd">        Returns a new list containing elements from the population while</span>
</span><span data-line="363"><span class="sd">        leaving the original population unchanged.  The resulting list is</span>
</span><span data-line="364"><span class="sd">        in selection order so that all sub-slices will also be valid random</span>
</span><span data-line="365"><span class="sd">        samples.  This allows raffle winners (the sample) to be partitioned</span>
</span><span data-line="366"><span class="sd">        into grand prize and second place winners (the subslices).</span>
</span><span data-line="367">
</span><span data-line="368"><span class="sd">        Members of the population need not be hashable or unique.  If the</span>
</span><span data-line="369"><span class="sd">        population contains repeats, then each occurrence is a possible</span>
</span><span data-line="370"><span class="sd">        selection in the sample.</span>
</span><span data-line="371">
</span><span data-line="372"><span class="sd">        Repeated elements can be specified one at a time or with the optional</span>
</span><span data-line="373"><span class="sd">        counts parameter.  For example:</span>
</span><span data-line="374">
</span><span data-line="375"><span class="sd">            sample([&#39;red&#39;, &#39;blue&#39;], counts=[4, 2], k=5)</span>
</span><span data-line="376">
</span><span data-line="377"><span class="sd">        is equivalent to:</span>
</span><span data-line="378">
</span><span data-line="379"><span class="sd">            sample([&#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;red&#39;, &#39;blue&#39;, &#39;blue&#39;], k=5)</span>
</span><span data-line="380">
</span><span data-line="381"><span class="sd">        To choose a sample from a range of integers, use range() for the</span>
</span><span data-line="382"><span class="sd">        population argument.  This is especially fast and space efficient</span>
</span><span data-line="383"><span class="sd">        for sampling from a large population:</span>
</span><span data-line="384">
</span><span data-line="385"><span class="sd">            sample(range(10000000), 60)</span>
</span><span data-line="386">
</span><span data-line="387"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="388">
</span><span data-line="389">        <span class="c1"># Sampling without replacement entails tracking either potential</span>
</span><span data-line="390">        <span class="c1"># selections (the pool) in a list or previous selections in a set.</span>
</span><span data-line="391">
</span><span data-line="392">        <span class="c1"># When the number of selections is small compared to the</span>
</span><span data-line="393">        <span class="c1"># population, then tracking selections is efficient, requiring</span>
</span><span data-line="394">        <span class="c1"># only a small set and an occasional reselection.  For</span>
</span><span data-line="395">        <span class="c1"># a larger number of selections, the pool tracking method is</span>
</span><span data-line="396">        <span class="c1"># preferred since the list takes less space than the</span>
</span><span data-line="397">        <span class="c1"># set and it doesn&#39;t suffer from frequent reselections.</span>
</span><span data-line="398">
</span><span data-line="399">        <span class="c1"># The number of calls to _randbelow() is kept at or near k, the</span>
</span><span data-line="400">        <span class="c1"># theoretical minimum.  This is important because running time</span>
</span><span data-line="401">        <span class="c1"># is dominated by _randbelow() and because it extracts the</span>
</span><span data-line="402">        <span class="c1"># least entropy from the underlying random number generators.</span>
</span><span data-line="403">
</span><span data-line="404">        <span class="c1"># Memory requirements are kept to the smaller of a k-length</span>
</span><span data-line="405">        <span class="c1"># set or an n-length list.</span>
</span><span data-line="406">
</span><span data-line="407">        <span class="c1"># There are other sampling algorithms that do not require</span>
</span><span data-line="408">        <span class="c1"># auxiliary memory, but they were rejected because they made</span>
</span><span data-line="409">        <span class="c1"># too many calls to _randbelow(), making them slower and</span>
</span><span data-line="410">        <span class="c1"># causing them to eat more entropy than necessary.</span>
</span><span data-line="411">
</span><span data-line="412">        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">_Sequence</span><span class="p">):</span>
</span><span data-line="413">            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Population must be a sequence.  &quot;</span>
</span><span data-line="414">                            <span class="s2">&quot;For dicts or sets, use sorted(d).&quot;</span><span class="p">)</span>
</span><span data-line="415">        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">population</span><span class="p">)</span>
</span><span data-line="416">        <span class="k">if</span> <span class="n">counts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="417">            <span class="n">cum_counts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">_accumulate</span><span class="p">(</span><span class="n">counts</span><span class="p">))</span>
</span><span data-line="418">            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cum_counts</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
</span><span data-line="419">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The number of counts does not match the population&#39;</span><span class="p">)</span>
</span><span data-line="420">            <span class="n">total</span> <span class="o">=</span> <span class="n">cum_counts</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span data-line="421">            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span data-line="422">                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Counts must be integers&#39;</span><span class="p">)</span>
</span><span data-line="423">            <span class="k">if</span> <span class="n">total</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="424">                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Total of counts must be greater than zero&#39;</span><span class="p">)</span>
</span><span data-line="425">            <span class="n">selections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">),</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>
</span><span data-line="426">            <span class="n">bisect</span> <span class="o">=</span> <span class="n">_bisect</span>
</span><span data-line="427">            <span class="k">return</span> <span class="p">[</span><span class="n">population</span><span class="p">[</span><span class="n">bisect</span><span class="p">(</span><span class="n">cum_counts</span><span class="p">,</span> <span class="n">s</span><span class="p">)]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">selections</span><span class="p">]</span>
</span><span data-line="428">        <span class="n">randbelow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_randbelow</span>
</span><span data-line="429">        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
</span><span data-line="430">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Sample larger than population or is negative&quot;</span><span class="p">)</span>
</span><span data-line="431">        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">k</span>
</span><span data-line="432">        <span class="n">setsize</span> <span class="o">=</span> <span class="mi">21</span>        <span class="c1"># size of a small set minus size of an empty list</span>
</span><span data-line="433">        <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
</span><span data-line="434">            <span class="n">setsize</span> <span class="o">+=</span> <span class="mi">4</span> <span class="o">**</span> <span class="n">_ceil</span><span class="p">(</span><span class="n">_log</span><span class="p">(</span><span class="n">k</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>  <span class="c1"># table size for big sets</span>
</span><span data-line="435">        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">setsize</span><span class="p">:</span>
</span><span data-line="436">            <span class="c1"># An n-length list is smaller than a k-length set.</span>
</span><span data-line="437">            <span class="c1"># Invariant:  non-selected at pool[0 : n-i]</span>
</span><span data-line="438">            <span class="n">pool</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">population</span><span class="p">)</span>
</span><span data-line="439">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
</span><span data-line="440">                <span class="n">j</span> <span class="o">=</span> <span class="n">randbelow</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
</span><span data-line="441">                <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">pool</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span data-line="442">                <span class="n">pool</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">pool</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># move non-selected item into vacancy</span>
</span><span data-line="443">        <span class="k">else</span><span class="p">:</span>
</span><span data-line="444">            <span class="n">selected</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</span><span data-line="445">            <span class="n">selected_add</span> <span class="o">=</span> <span class="n">selected</span><span class="o">.</span><span class="n">add</span>
</span><span data-line="446">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
</span><span data-line="447">                <span class="n">j</span> <span class="o">=</span> <span class="n">randbelow</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span data-line="448">                <span class="k">while</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">selected</span><span class="p">:</span>
</span><span data-line="449">                    <span class="n">j</span> <span class="o">=</span> <span class="n">randbelow</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span data-line="450">                <span class="n">selected_add</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</span><span data-line="451">                <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">population</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span data-line="452">        <span class="k">return</span> <span class="n">result</span>
</span><span data-line="453">
</span><span data-line="454">    <span class="k">def</span> <span class="nf">choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">cum_weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span><span data-line="455"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a k sized list of population elements chosen with replacement.</span>
</span><span data-line="456">
</span><span data-line="457"><span class="sd">        If the relative weights or cumulative weights are not specified,</span>
</span><span data-line="458"><span class="sd">        the selections are made with equal probability.</span>
</span><span data-line="459">
</span><span data-line="460"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="461">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="462">        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">population</span><span class="p">)</span>
</span><span data-line="463">        <span class="k">if</span> <span class="n">cum_weights</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="464">            <span class="k">if</span> <span class="n">weights</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="465">                <span class="n">floor</span> <span class="o">=</span> <span class="n">_floor</span>
</span><span data-line="466">                <span class="n">n</span> <span class="o">+=</span> <span class="mf">0.0</span>    <span class="c1"># convert to float for a small speed improvement</span>
</span><span data-line="467">                <span class="k">return</span> <span class="p">[</span><span class="n">population</span><span class="p">[</span><span class="n">floor</span><span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="n">n</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_repeat</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">k</span><span class="p">)]</span>
</span><span data-line="468">            <span class="k">try</span><span class="p">:</span>
</span><span data-line="469">                <span class="n">cum_weights</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">_accumulate</span><span class="p">(</span><span class="n">weights</span><span class="p">))</span>
</span><span data-line="470">            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
</span><span data-line="471">                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">weights</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span data-line="472">                    <span class="k">raise</span>
</span><span data-line="473">                <span class="n">k</span> <span class="o">=</span> <span class="n">weights</span>
</span><span data-line="474">                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span data-line="475">                    <span class="sa">f</span><span class="s1">&#39;The number of choices must be a keyword argument: </span><span class="si">{</span><span class="n">k</span><span class="si">=}</span><span class="s1">&#39;</span>
</span><span data-line="476">                <span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>
</span><span data-line="477">        <span class="k">elif</span> <span class="n">weights</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="478">            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot specify both weights and cumulative weights&#39;</span><span class="p">)</span>
</span><span data-line="479">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cum_weights</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
</span><span data-line="480">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The number of weights does not match the population&#39;</span><span class="p">)</span>
</span><span data-line="481">        <span class="n">total</span> <span class="o">=</span> <span class="n">cum_weights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.0</span>   <span class="c1"># convert to float</span>
</span><span data-line="482">        <span class="k">if</span> <span class="n">total</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span data-line="483">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Total of weights must be greater than zero&#39;</span><span class="p">)</span>
</span><span data-line="484">        <span class="k">if</span> <span class="ow">not</span> <span class="n">_isfinite</span><span class="p">(</span><span class="n">total</span><span class="p">):</span>
</span><span data-line="485">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Total of weights must be finite&#39;</span><span class="p">)</span>
</span><span data-line="486">        <span class="n">bisect</span> <span class="o">=</span> <span class="n">_bisect</span>
</span><span data-line="487">        <span class="n">hi</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span>
</span><span data-line="488">        <span class="k">return</span> <span class="p">[</span><span class="n">population</span><span class="p">[</span><span class="n">bisect</span><span class="p">(</span><span class="n">cum_weights</span><span class="p">,</span> <span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="n">total</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">hi</span><span class="p">)]</span>
</span><span data-line="489">                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_repeat</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">k</span><span class="p">)]</span>
</span><span data-line="490">
</span><span data-line="491">
</span><span data-line="492">    <span class="c1">## -------------------- real-valued distributions  -------------------</span>
</span><span data-line="493">
</span><span data-line="494">    <span class="k">def</span> <span class="nf">uniform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span><span data-line="495"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a random number in the range [a, b) or [a, b] depending on rounding.</span>
</span><span data-line="496">
</span><span data-line="497"><span class="sd">        The mean (expected value) and variance of the random variable are:</span>
</span><span data-line="498">
</span><span data-line="499"><span class="sd">            E[X] = (a + b) / 2</span>
</span><span data-line="500"><span class="sd">            Var[X] = (b - a) ** 2 / 12</span>
</span><span data-line="501">
</span><span data-line="502"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="503">        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</span><span data-line="504">
</span><span data-line="505">    <span class="k">def</span> <span class="nf">triangular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span data-line="506"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Triangular distribution.</span>
</span><span data-line="507">
</span><span data-line="508"><span class="sd">        Continuous distribution bounded by given lower and upper limits,</span>
</span><span data-line="509"><span class="sd">        and having a given mode value in-between.</span>
</span><span data-line="510">
</span><span data-line="511"><span class="sd">        http://en.wikipedia.org/wiki/Triangular_distribution</span>
</span><span data-line="512">
</span><span data-line="513"><span class="sd">        The mean (expected value) and variance of the random variable are:</span>
</span><span data-line="514">
</span><span data-line="515"><span class="sd">            E[X] = (low + high + mode) / 3</span>
</span><span data-line="516"><span class="sd">            Var[X] = (low**2 + high**2 + mode**2 - low*high - low*mode - high*mode) / 18</span>
</span><span data-line="517">
</span><span data-line="518"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="519">        <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</span><span data-line="520">        <span class="k">try</span><span class="p">:</span>
</span><span data-line="521">            <span class="n">c</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">(</span><span class="n">mode</span> <span class="o">-</span> <span class="n">low</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">high</span> <span class="o">-</span> <span class="n">low</span><span class="p">)</span>
</span><span data-line="522">        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
</span><span data-line="523">            <span class="k">return</span> <span class="n">low</span>
</span><span data-line="524">        <span class="k">if</span> <span class="n">u</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">:</span>
</span><span data-line="525">            <span class="n">u</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">u</span>
</span><span data-line="526">            <span class="n">c</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">c</span>
</span><span data-line="527">            <span class="n">low</span><span class="p">,</span> <span class="n">high</span> <span class="o">=</span> <span class="n">high</span><span class="p">,</span> <span class="n">low</span>
</span><span data-line="528">        <span class="k">return</span> <span class="n">low</span> <span class="o">+</span> <span class="p">(</span><span class="n">high</span> <span class="o">-</span> <span class="n">low</span><span class="p">)</span> <span class="o">*</span> <span class="n">_sqrt</span><span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span>
</span><span data-line="529">
</span><span data-line="530">    <span class="k">def</span> <span class="nf">normalvariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
</span><span data-line="531"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Normal distribution.</span>
</span><span data-line="532">
</span><span data-line="533"><span class="sd">        mu is the mean, and sigma is the standard deviation.</span>
</span><span data-line="534">
</span><span data-line="535"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="536">        <span class="c1"># Uses Kinderman and Monahan method. Reference: Kinderman,</span>
</span><span data-line="537">        <span class="c1"># A.J. and Monahan, J.F., &quot;Computer generation of random</span>
</span><span data-line="538">        <span class="c1"># variables using the ratio of uniform deviates&quot;, ACM Trans</span>
</span><span data-line="539">        <span class="c1"># Math Software, 3, (1977), pp257-260.</span>
</span><span data-line="540">
</span><span data-line="541">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="542">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="543">            <span class="n">u1</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="544">            <span class="n">u2</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="545">            <span class="n">z</span> <span class="o">=</span> <span class="n">NV_MAGICCONST</span> <span class="o">*</span> <span class="p">(</span><span class="n">u1</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="n">u2</span>
</span><span data-line="546">            <span class="n">zz</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">/</span> <span class="mf">4.0</span>
</span><span data-line="547">            <span class="k">if</span> <span class="n">zz</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">_log</span><span class="p">(</span><span class="n">u2</span><span class="p">):</span>
</span><span data-line="548">                <span class="k">break</span>
</span><span data-line="549">        <span class="k">return</span> <span class="n">mu</span> <span class="o">+</span> <span class="n">z</span> <span class="o">*</span> <span class="n">sigma</span>
</span><span data-line="550">
</span><span data-line="551">    <span class="k">def</span> <span class="nf">gauss</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
</span><span data-line="552"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gaussian distribution.</span>
</span><span data-line="553">
</span><span data-line="554"><span class="sd">        mu is the mean, and sigma is the standard deviation.  This is</span>
</span><span data-line="555"><span class="sd">        slightly faster than the normalvariate() function.</span>
</span><span data-line="556">
</span><span data-line="557"><span class="sd">        Not thread-safe without a lock around calls.</span>
</span><span data-line="558">
</span><span data-line="559"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="560">        <span class="c1"># When x and y are two variables from [0, 1), uniformly</span>
</span><span data-line="561">        <span class="c1"># distributed, then</span>
</span><span data-line="562">        <span class="c1">#</span>
</span><span data-line="563">        <span class="c1">#    cos(2*pi*x)*sqrt(-2*log(1-y))</span>
</span><span data-line="564">        <span class="c1">#    sin(2*pi*x)*sqrt(-2*log(1-y))</span>
</span><span data-line="565">        <span class="c1">#</span>
</span><span data-line="566">        <span class="c1"># are two *independent* variables with normal distribution</span>
</span><span data-line="567">        <span class="c1"># (mu = 0, sigma = 1).</span>
</span><span data-line="568">        <span class="c1"># (Lambert Meertens)</span>
</span><span data-line="569">        <span class="c1"># (corrected version; bug discovered by Mike Miller, fixed by LM)</span>
</span><span data-line="570">
</span><span data-line="571">        <span class="c1"># Multithreading note: When two threads call this function</span>
</span><span data-line="572">        <span class="c1"># simultaneously, it is possible that they will receive the</span>
</span><span data-line="573">        <span class="c1"># same return value.  The window is very small though.  To</span>
</span><span data-line="574">        <span class="c1"># avoid this, you have to use a lock around all calls.  (I</span>
</span><span data-line="575">        <span class="c1"># didn&#39;t want to slow this down in the serial case by using a</span>
</span><span data-line="576">        <span class="c1"># lock here.)</span>
</span><span data-line="577">
</span><span data-line="578">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="579">        <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span>
</span><span data-line="580">        <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span> <span class="o">=</span> <span class="kc">None</span>
</span><span data-line="581">        <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="582">            <span class="n">x2pi</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="n">TWOPI</span>
</span><span data-line="583">            <span class="n">g2rad</span> <span class="o">=</span> <span class="n">_sqrt</span><span class="p">(</span><span class="o">-</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">_log</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">random</span><span class="p">()))</span>
</span><span data-line="584">            <span class="n">z</span> <span class="o">=</span> <span class="n">_cos</span><span class="p">(</span><span class="n">x2pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">g2rad</span>
</span><span data-line="585">            <span class="bp">self</span><span class="o">.</span><span class="n">gauss_next</span> <span class="o">=</span> <span class="n">_sin</span><span class="p">(</span><span class="n">x2pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">g2rad</span>
</span><span data-line="586">
</span><span data-line="587">        <span class="k">return</span> <span class="n">mu</span> <span class="o">+</span> <span class="n">z</span> <span class="o">*</span> <span class="n">sigma</span>
</span><span data-line="588">
</span><span data-line="589">    <span class="k">def</span> <span class="nf">lognormvariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
</span><span data-line="590"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Log normal distribution.</span>
</span><span data-line="591">
</span><span data-line="592"><span class="sd">        If you take the natural logarithm of this distribution, you&#39;ll get a</span>
</span><span data-line="593"><span class="sd">        normal distribution with mean mu and standard deviation sigma.</span>
</span><span data-line="594"><span class="sd">        mu can have any value, and sigma must be greater than zero.</span>
</span><span data-line="595">
</span><span data-line="596"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="597">        <span class="k">return</span> <span class="n">_exp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">))</span>
</span><span data-line="598">
</span><span data-line="599">    <span class="k">def</span> <span class="nf">expovariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lambd</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
</span><span data-line="600"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Exponential distribution.</span>
</span><span data-line="601">
</span><span data-line="602"><span class="sd">        lambd is 1.0 divided by the desired mean.  It should be</span>
</span><span data-line="603"><span class="sd">        nonzero.  (The parameter would be called &quot;lambda&quot;, but that is</span>
</span><span data-line="604"><span class="sd">        a reserved word in Python.)  Returned values range from 0 to</span>
</span><span data-line="605"><span class="sd">        positive infinity if lambd is positive, and from negative</span>
</span><span data-line="606"><span class="sd">        infinity to 0 if lambd is negative.</span>
</span><span data-line="607">
</span><span data-line="608"><span class="sd">        The mean (expected value) and variance of the random variable are:</span>
</span><span data-line="609">
</span><span data-line="610"><span class="sd">            E[X] = 1 / lambd</span>
</span><span data-line="611"><span class="sd">            Var[X] = 1 / lambd ** 2</span>
</span><span data-line="612">
</span><span data-line="613"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="614">        <span class="c1"># we use 1-random() instead of random() to preclude the</span>
</span><span data-line="615">        <span class="c1"># possibility of taking the log of zero.</span>
</span><span data-line="616">
</span><span data-line="617">        <span class="k">return</span> <span class="o">-</span><span class="n">_log</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="p">())</span> <span class="o">/</span> <span class="n">lambd</span>
</span><span data-line="618">
</span><span data-line="619">    <span class="k">def</span> <span class="nf">vonmisesvariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">kappa</span><span class="p">):</span>
</span><span data-line="620"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Circular data distribution.</span>
</span><span data-line="621">
</span><span data-line="622"><span class="sd">        mu is the mean angle, expressed in radians between 0 and 2*pi, and</span>
</span><span data-line="623"><span class="sd">        kappa is the concentration parameter, which must be greater than or</span>
</span><span data-line="624"><span class="sd">        equal to zero.  If kappa is equal to zero, this distribution reduces</span>
</span><span data-line="625"><span class="sd">        to a uniform random angle over the range 0 to 2*pi.</span>
</span><span data-line="626">
</span><span data-line="627"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="628">        <span class="c1"># Based upon an algorithm published in: Fisher, N.I.,</span>
</span><span data-line="629">        <span class="c1"># &quot;Statistical Analysis of Circular Data&quot;, Cambridge</span>
</span><span data-line="630">        <span class="c1"># University Press, 1993.</span>
</span><span data-line="631">
</span><span data-line="632">        <span class="c1"># Thanks to Magnus Kessler for a correction to the</span>
</span><span data-line="633">        <span class="c1"># implementation of step 4.</span>
</span><span data-line="634">
</span><span data-line="635">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="636">        <span class="k">if</span> <span class="n">kappa</span> <span class="o">&lt;=</span> <span class="mf">1e-6</span><span class="p">:</span>
</span><span data-line="637">            <span class="k">return</span> <span class="n">TWOPI</span> <span class="o">*</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="638">
</span><span data-line="639">        <span class="n">s</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">/</span> <span class="n">kappa</span>
</span><span data-line="640">        <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">_sqrt</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">s</span> <span class="o">*</span> <span class="n">s</span><span class="p">)</span>
</span><span data-line="641">
</span><span data-line="642">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="643">            <span class="n">u1</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="644">            <span class="n">z</span> <span class="o">=</span> <span class="n">_cos</span><span class="p">(</span><span class="n">_pi</span> <span class="o">*</span> <span class="n">u1</span><span class="p">)</span>
</span><span data-line="645">
</span><span data-line="646">            <span class="n">d</span> <span class="o">=</span> <span class="n">z</span> <span class="o">/</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">z</span><span class="p">)</span>
</span><span data-line="647">            <span class="n">u2</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="648">            <span class="k">if</span> <span class="n">u2</span> <span class="o">&lt;</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">d</span> <span class="o">*</span> <span class="n">d</span> <span class="ow">or</span> <span class="n">u2</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">d</span><span class="p">)</span> <span class="o">*</span> <span class="n">_exp</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
</span><span data-line="649">                <span class="k">break</span>
</span><span data-line="650">
</span><span data-line="651">        <span class="n">q</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">r</span>
</span><span data-line="652">        <span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">q</span> <span class="o">+</span> <span class="n">z</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">q</span> <span class="o">*</span> <span class="n">z</span><span class="p">)</span>
</span><span data-line="653">        <span class="n">u3</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="654">        <span class="k">if</span> <span class="n">u3</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span data-line="655">            <span class="n">theta</span> <span class="o">=</span> <span class="p">(</span><span class="n">mu</span> <span class="o">+</span> <span class="n">_acos</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">%</span> <span class="n">TWOPI</span>
</span><span data-line="656">        <span class="k">else</span><span class="p">:</span>
</span><span data-line="657">            <span class="n">theta</span> <span class="o">=</span> <span class="p">(</span><span class="n">mu</span> <span class="o">-</span> <span class="n">_acos</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">%</span> <span class="n">TWOPI</span>
</span><span data-line="658">
</span><span data-line="659">        <span class="k">return</span> <span class="n">theta</span>
</span><span data-line="660">
</span><span data-line="661">    <span class="k">def</span> <span class="nf">gammavariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
</span><span data-line="662"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gamma distribution.  Not the gamma function!</span>
</span><span data-line="663">
</span><span data-line="664"><span class="sd">        Conditions on the parameters are alpha &gt; 0 and beta &gt; 0.</span>
</span><span data-line="665">
</span><span data-line="666"><span class="sd">        The probability distribution function is:</span>
</span><span data-line="667">
</span><span data-line="668"><span class="sd">                    x ** (alpha - 1) * math.exp(-x / beta)</span>
</span><span data-line="669"><span class="sd">          pdf(x) =  --------------------------------------</span>
</span><span data-line="670"><span class="sd">                      math.gamma(alpha) * beta ** alpha</span>
</span><span data-line="671">
</span><span data-line="672"><span class="sd">        The mean (expected value) and variance of the random variable are:</span>
</span><span data-line="673">
</span><span data-line="674"><span class="sd">            E[X] = alpha * beta</span>
</span><span data-line="675"><span class="sd">            Var[X] = alpha * beta ** 2</span>
</span><span data-line="676">
</span><span data-line="677"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="678">
</span><span data-line="679">        <span class="c1"># Warning: a few older sources define the gamma distribution in terms</span>
</span><span data-line="680">        <span class="c1"># of alpha &gt; -1.0</span>
</span><span data-line="681">        <span class="k">if</span> <span class="n">alpha</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">beta</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span data-line="682">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;gammavariate: alpha and beta must be &gt; 0.0&#39;</span><span class="p">)</span>
</span><span data-line="683">
</span><span data-line="684">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="685">        <span class="k">if</span> <span class="n">alpha</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span data-line="686">
</span><span data-line="687">            <span class="c1"># Uses R.C.H. Cheng, &quot;The generation of Gamma</span>
</span><span data-line="688">            <span class="c1"># variables with non-integral shape parameters&quot;,</span>
</span><span data-line="689">            <span class="c1"># Applied Statistics, (1977), 26, No. 1, p71-74</span>
</span><span data-line="690">
</span><span data-line="691">            <span class="n">ainv</span> <span class="o">=</span> <span class="n">_sqrt</span><span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span data-line="692">            <span class="n">bbb</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">-</span> <span class="n">LOG4</span>
</span><span data-line="693">            <span class="n">ccc</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">+</span> <span class="n">ainv</span>
</span><span data-line="694">
</span><span data-line="695">            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="696">                <span class="n">u1</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="697">                <span class="k">if</span> <span class="ow">not</span> <span class="mf">1e-7</span> <span class="o">&lt;</span> <span class="n">u1</span> <span class="o">&lt;</span> <span class="mf">0.9999999</span><span class="p">:</span>
</span><span data-line="698">                    <span class="k">continue</span>
</span><span data-line="699">                <span class="n">u2</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="700">                <span class="n">v</span> <span class="o">=</span> <span class="n">_log</span><span class="p">(</span><span class="n">u1</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">u1</span><span class="p">))</span> <span class="o">/</span> <span class="n">ainv</span>
</span><span data-line="701">                <span class="n">x</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">_exp</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span data-line="702">                <span class="n">z</span> <span class="o">=</span> <span class="n">u1</span> <span class="o">*</span> <span class="n">u1</span> <span class="o">*</span> <span class="n">u2</span>
</span><span data-line="703">                <span class="n">r</span> <span class="o">=</span> <span class="n">bbb</span> <span class="o">+</span> <span class="n">ccc</span> <span class="o">*</span> <span class="n">v</span> <span class="o">-</span> <span class="n">x</span>
</span><span data-line="704">                <span class="k">if</span> <span class="n">r</span> <span class="o">+</span> <span class="n">SG_MAGICCONST</span> <span class="o">-</span> <span class="mf">4.5</span> <span class="o">*</span> <span class="n">z</span> <span class="o">&gt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">&gt;=</span> <span class="n">_log</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
</span><span data-line="705">                    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">beta</span>
</span><span data-line="706">
</span><span data-line="707">        <span class="k">elif</span> <span class="n">alpha</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span data-line="708">            <span class="c1"># expovariate(1/beta)</span>
</span><span data-line="709">            <span class="k">return</span> <span class="o">-</span><span class="n">_log</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">random</span><span class="p">())</span> <span class="o">*</span> <span class="n">beta</span>
</span><span data-line="710">
</span><span data-line="711">        <span class="k">else</span><span class="p">:</span>
</span><span data-line="712">            <span class="c1"># alpha is between 0 and 1 (exclusive)</span>
</span><span data-line="713">            <span class="c1"># Uses ALGORITHM GS of Statistical Computing - Kennedy &amp; Gentle</span>
</span><span data-line="714">            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="715">                <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="716">                <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">_e</span> <span class="o">+</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">/</span> <span class="n">_e</span>
</span><span data-line="717">                <span class="n">p</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="n">u</span>
</span><span data-line="718">                <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span data-line="719">                    <span class="n">x</span> <span class="o">=</span> <span class="n">p</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">)</span>
</span><span data-line="720">                <span class="k">else</span><span class="p">:</span>
</span><span data-line="721">                    <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">_log</span><span class="p">((</span><span class="n">b</span> <span class="o">-</span> <span class="n">p</span><span class="p">)</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">)</span>
</span><span data-line="722">                <span class="n">u1</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="723">                <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span data-line="724">                    <span class="k">if</span> <span class="n">u1</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">**</span> <span class="p">(</span><span class="n">alpha</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">):</span>
</span><span data-line="725">                        <span class="k">break</span>
</span><span data-line="726">                <span class="k">elif</span> <span class="n">u1</span> <span class="o">&lt;=</span> <span class="n">_exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">):</span>
</span><span data-line="727">                    <span class="k">break</span>
</span><span data-line="728">            <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">beta</span>
</span><span data-line="729">
</span><span data-line="730">    <span class="k">def</span> <span class="nf">betavariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
</span><span data-line="731"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Beta distribution.</span>
</span><span data-line="732">
</span><span data-line="733"><span class="sd">        Conditions on the parameters are alpha &gt; 0 and beta &gt; 0.</span>
</span><span data-line="734"><span class="sd">        Returned values range between 0 and 1.</span>
</span><span data-line="735">
</span><span data-line="736"><span class="sd">        The mean (expected value) and variance of the random variable are:</span>
</span><span data-line="737">
</span><span data-line="738"><span class="sd">            E[X] = alpha / (alpha + beta)</span>
</span><span data-line="739"><span class="sd">            Var[X] = alpha * beta / ((alpha + beta)**2 * (alpha + beta + 1))</span>
</span><span data-line="740">
</span><span data-line="741"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="742">        <span class="c1">## See</span>
</span><span data-line="743">        <span class="c1">## http://mail.python.org/pipermail/python-bugs-list/2001-January/003752.html</span>
</span><span data-line="744">        <span class="c1">## for Ivan Frohne&#39;s insightful analysis of why the original implementation:</span>
</span><span data-line="745">        <span class="c1">##</span>
</span><span data-line="746">        <span class="c1">##    def betavariate(self, alpha, beta):</span>
</span><span data-line="747">        <span class="c1">##        # Discrete Event Simulation in C, pp 87-88.</span>
</span><span data-line="748">        <span class="c1">##</span>
</span><span data-line="749">        <span class="c1">##        y = self.expovariate(alpha)</span>
</span><span data-line="750">        <span class="c1">##        z = self.expovariate(1.0/beta)</span>
</span><span data-line="751">        <span class="c1">##        return z/(y+z)</span>
</span><span data-line="752">        <span class="c1">##</span>
</span><span data-line="753">        <span class="c1">## was dead wrong, and how it probably got that way.</span>
</span><span data-line="754">
</span><span data-line="755">        <span class="c1"># This version due to Janne Sinkkonen, and matches all the std</span>
</span><span data-line="756">        <span class="c1"># texts (e.g., Knuth Vol 2 Ed 3 pg 134 &quot;the beta distribution&quot;).</span>
</span><span data-line="757">        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammavariate</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span data-line="758">        <span class="k">if</span> <span class="n">y</span><span class="p">:</span>
</span><span data-line="759">            <span class="k">return</span> <span class="n">y</span> <span class="o">/</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammavariate</span><span class="p">(</span><span class="n">beta</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="760">        <span class="k">return</span> <span class="mf">0.0</span>
</span><span data-line="761">
</span><span data-line="762">    <span class="k">def</span> <span class="nf">paretovariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
</span><span data-line="763"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Pareto distribution.  alpha is the shape parameter.&quot;&quot;&quot;</span>
</span><span data-line="764">        <span class="c1"># Jain, pg. 495</span>
</span><span data-line="765">
</span><span data-line="766">        <span class="n">u</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</span><span data-line="767">        <span class="k">return</span> <span class="n">u</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">)</span>
</span><span data-line="768">
</span><span data-line="769">    <span class="k">def</span> <span class="nf">weibullvariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">):</span>
</span><span data-line="770"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Weibull distribution.</span>
</span><span data-line="771">
</span><span data-line="772"><span class="sd">        alpha is the scale parameter and beta is the shape parameter.</span>
</span><span data-line="773">
</span><span data-line="774"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="775">        <span class="c1"># Jain, pg. 499; bug fix courtesy Bill Arms</span>
</span><span data-line="776">
</span><span data-line="777">        <span class="n">u</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
</span><span data-line="778">        <span class="k">return</span> <span class="n">alpha</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">_log</span><span class="p">(</span><span class="n">u</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">beta</span><span class="p">)</span>
</span><span data-line="779">
</span><span data-line="780">
</span><span data-line="781">    <span class="c1">## -------------------- discrete  distributions  ---------------------</span>
</span><span data-line="782">
</span><span data-line="783">    <span class="k">def</span> <span class="nf">binomialvariate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mf">0.5</span><span class="p">):</span>
</span><span data-line="784"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Binomial random variable.</span>
</span><span data-line="785">
</span><span data-line="786"><span class="sd">        Gives the number of successes for *n* independent trials</span>
</span><span data-line="787"><span class="sd">        with the probability of success in each trial being *p*:</span>
</span><span data-line="788">
</span><span data-line="789"><span class="sd">            sum(random() &lt; p for i in range(n))</span>
</span><span data-line="790">
</span><span data-line="791"><span class="sd">        Returns an integer in the range:   0 &lt;= X &lt;= n</span>
</span><span data-line="792">
</span><span data-line="793"><span class="sd">        The mean (expected value) and variance of the random variable are:</span>
</span><span data-line="794">
</span><span data-line="795"><span class="sd">            E[X] = n * p</span>
</span><span data-line="796"><span class="sd">            Var[x] = n * p * (1 - p)</span>
</span><span data-line="797">
</span><span data-line="798"><span class="sd">        &quot;&quot;&quot;</span>
</span><span data-line="799">        <span class="c1"># Error check inputs and handle edge cases</span>
</span><span data-line="800">        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="801">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n must be non-negative&quot;</span><span class="p">)</span>
</span><span data-line="802">        <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">p</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span data-line="803">            <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span data-line="804">                <span class="k">return</span> <span class="mi">0</span>
</span><span data-line="805">            <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span data-line="806">                <span class="k">return</span> <span class="n">n</span>
</span><span data-line="807">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;p must be in the range 0.0 &lt;= p &lt;= 1.0&quot;</span><span class="p">)</span>
</span><span data-line="808">
</span><span data-line="809">        <span class="n">random</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="810">
</span><span data-line="811">        <span class="c1"># Fast path for a common case</span>
</span><span data-line="812">        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span data-line="813">            <span class="k">return</span> <span class="n">_index</span><span class="p">(</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">)</span>
</span><span data-line="814">
</span><span data-line="815">        <span class="c1"># Exploit symmetry to establish:  p &lt;= 0.5</span>
</span><span data-line="816">        <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span data-line="817">            <span class="k">return</span> <span class="n">n</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">binomialvariate</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">p</span><span class="p">)</span>
</span><span data-line="818">
</span><span data-line="819">        <span class="k">if</span> <span class="n">n</span> <span class="o">*</span> <span class="n">p</span> <span class="o">&lt;</span> <span class="mf">10.0</span><span class="p">:</span>
</span><span data-line="820">            <span class="c1"># BG: Geometric method by Devroye with running time of O(np).</span>
</span><span data-line="821">            <span class="c1"># https://dl.acm.org/doi/pdf/10.1145/42372.42381</span>
</span><span data-line="822">            <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span data-line="823">            <span class="n">c</span> <span class="o">=</span> <span class="n">_log2</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">p</span><span class="p">)</span>
</span><span data-line="824">            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="p">:</span>
</span><span data-line="825">                <span class="k">return</span> <span class="n">x</span>
</span><span data-line="826">            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="827">                <span class="n">y</span> <span class="o">+=</span> <span class="n">_floor</span><span class="p">(</span><span class="n">_log2</span><span class="p">(</span><span class="n">random</span><span class="p">())</span> <span class="o">/</span> <span class="n">c</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span data-line="828">                <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
</span><span data-line="829">                    <span class="k">return</span> <span class="n">x</span>
</span><span data-line="830">                <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span data-line="831">
</span><span data-line="832">        <span class="c1"># BTRS: Transformed rejection with squeeze method by Wolfgang Hrmann</span>
</span><span data-line="833">        <span class="c1"># https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.47.8407&amp;rep=rep1&amp;type=pdf</span>
</span><span data-line="834">        <span class="k">assert</span> <span class="n">n</span><span class="o">*</span><span class="n">p</span> <span class="o">&gt;=</span> <span class="mf">10.0</span> <span class="ow">and</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="mf">0.5</span>
</span><span data-line="835">        <span class="n">setup_complete</span> <span class="o">=</span> <span class="kc">False</span>
</span><span data-line="836">
</span><span data-line="837">        <span class="n">spq</span> <span class="o">=</span> <span class="n">_sqrt</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">p</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">p</span><span class="p">))</span>  <span class="c1"># Standard deviation of the distribution</span>
</span><span data-line="838">        <span class="n">b</span> <span class="o">=</span> <span class="mf">1.15</span> <span class="o">+</span> <span class="mf">2.53</span> <span class="o">*</span> <span class="n">spq</span>
</span><span data-line="839">        <span class="n">a</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.0873</span> <span class="o">+</span> <span class="mf">0.0248</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">p</span>
</span><span data-line="840">        <span class="n">c</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">p</span> <span class="o">+</span> <span class="mf">0.5</span>
</span><span data-line="841">        <span class="n">vr</span> <span class="o">=</span> <span class="mf">0.92</span> <span class="o">-</span> <span class="mf">4.2</span> <span class="o">/</span> <span class="n">b</span>
</span><span data-line="842">
</span><span data-line="843">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="844">
</span><span data-line="845">            <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="846">            <span class="n">u</span> <span class="o">-=</span> <span class="mf">0.5</span>
</span><span data-line="847">            <span class="n">us</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">_fabs</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</span><span data-line="848">            <span class="n">k</span> <span class="o">=</span> <span class="n">_floor</span><span class="p">((</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">a</span> <span class="o">/</span> <span class="n">us</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">u</span> <span class="o">+</span> <span class="n">c</span><span class="p">)</span>
</span><span data-line="849">            <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
</span><span data-line="850">                <span class="k">continue</span>
</span><span data-line="851">
</span><span data-line="852">            <span class="c1"># The early-out &quot;squeeze&quot; test substantially reduces</span>
</span><span data-line="853">            <span class="c1"># the number of acceptance condition evaluations.</span>
</span><span data-line="854">            <span class="n">v</span> <span class="o">=</span> <span class="n">random</span><span class="p">()</span>
</span><span data-line="855">            <span class="k">if</span> <span class="n">us</span> <span class="o">&gt;=</span> <span class="mf">0.07</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">vr</span><span class="p">:</span>
</span><span data-line="856">                <span class="k">return</span> <span class="n">k</span>
</span><span data-line="857">
</span><span data-line="858">            <span class="c1"># Acceptance-rejection test.</span>
</span><span data-line="859">            <span class="c1"># Note, the original paper erroneously omits the call to log(v)</span>
</span><span data-line="860">            <span class="c1"># when comparing to the log of the rescaled binomial distribution.</span>
</span><span data-line="861">            <span class="k">if</span> <span class="ow">not</span> <span class="n">setup_complete</span><span class="p">:</span>
</span><span data-line="862">                <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.83</span> <span class="o">+</span> <span class="mf">5.1</span> <span class="o">/</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">spq</span>
</span><span data-line="863">                <span class="n">lpq</span> <span class="o">=</span> <span class="n">_log</span><span class="p">(</span><span class="n">p</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">p</span><span class="p">))</span>
</span><span data-line="864">                <span class="n">m</span> <span class="o">=</span> <span class="n">_floor</span><span class="p">((</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="p">)</span>         <span class="c1"># Mode of the distribution</span>
</span><span data-line="865">                <span class="n">h</span> <span class="o">=</span> <span class="n">_lgamma</span><span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">_lgamma</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span data-line="866">                <span class="n">setup_complete</span> <span class="o">=</span> <span class="kc">True</span>           <span class="c1"># Only needs to be done once</span>
</span><span data-line="867">            <span class="n">v</span> <span class="o">*=</span> <span class="n">alpha</span> <span class="o">/</span> <span class="p">(</span><span class="n">a</span> <span class="o">/</span> <span class="p">(</span><span class="n">us</span> <span class="o">*</span> <span class="n">us</span><span class="p">)</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
</span><span data-line="868">            <span class="k">if</span> <span class="n">_log</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">h</span> <span class="o">-</span> <span class="n">_lgamma</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">_lgamma</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="n">lpq</span><span class="p">:</span>
</span><span data-line="869">                <span class="k">return</span> <span class="n">k</span>
</span><span data-line="870">
</span><span data-line="871">
</span><span data-line="872"><span class="c1">## ------------------------------------------------------------------</span>
</span><span data-line="873"><span class="c1">## --------------- Operating System Random Source  ------------------</span>
</span><span data-line="874">
</span><span data-line="875">
</span><span data-line="876"><span class="k">class</span> <span class="nc">SystemRandom</span><span class="p">(</span><span class="n">Random</span><span class="p">):</span>
</span><span data-line="877"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Alternate random number generator using sources provided</span>
</span><span data-line="878"><span class="sd">    by the operating system (such as /dev/urandom on Unix or</span>
</span><span data-line="879"><span class="sd">    CryptGenRandom on Windows).</span>
</span><span data-line="880">
</span><span data-line="881"><span class="sd">     Not available on all systems (see os.urandom() for details).</span>
</span><span data-line="882">
</span><span data-line="883"><span class="sd">    &quot;&quot;&quot;</span>
</span><span data-line="884">
</span><span data-line="885">    <span class="k">def</span> <span class="nf">random</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span data-line="886"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the next random number in the range 0.0 &lt;= X &lt; 1.0.&quot;&quot;&quot;</span>
</span><span data-line="887">        <span class="k">return</span> <span class="p">(</span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">_urandom</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">RECIP_BPF</span>
</span><span data-line="888">
</span><span data-line="889">    <span class="k">def</span> <span class="nf">getrandbits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
</span><span data-line="890"><span class="w">        </span><span class="sd">&quot;&quot;&quot;getrandbits(k) -&gt; x.  Generates an int with k random bits.&quot;&quot;&quot;</span>
</span><span data-line="891">        <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span data-line="892">            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;number of bits must be non-negative&#39;</span><span class="p">)</span>
</span><span data-line="893">        <span class="n">numbytes</span> <span class="o">=</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">//</span> <span class="mi">8</span>                       <span class="c1"># bits / 8 and rounded up</span>
</span><span data-line="894">        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">_urandom</span><span class="p">(</span><span class="n">numbytes</span><span class="p">))</span>
</span><span data-line="895">        <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="p">(</span><span class="n">numbytes</span> <span class="o">*</span> <span class="mi">8</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span>                <span class="c1"># trim excess bits</span>
</span><span data-line="896">
</span><span data-line="897">    <span class="k">def</span> <span class="nf">randbytes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span><span data-line="898"><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate n random bytes.&quot;&quot;&quot;</span>
</span><span data-line="899">        <span class="c1"># os.urandom(n) fails with ValueError for n &lt; 0</span>
</span><span data-line="900">        <span class="c1"># and returns an empty bytes string for n == 0.</span>
</span><span data-line="901">        <span class="k">return</span> <span class="n">_urandom</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span data-line="902">
</span><span data-line="903">    <span class="k">def</span> <span class="nf">seed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
</span><span data-line="904">        <span class="s2">&quot;Stub method.  Not used for a system random number generator.&quot;</span>
</span><span data-line="905">        <span class="k">return</span> <span class="kc">None</span>
</span><span data-line="906">
</span><span data-line="907">    <span class="k">def</span> <span class="nf">_notimplemented</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
</span><span data-line="908">        <span class="s2">&quot;Method should not be called for a system random number generator.&quot;</span>
</span><span data-line="909">        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;System entropy source does not have state.&#39;</span><span class="p">)</span>
</span><span data-line="910">    <span class="n">getstate</span> <span class="o">=</span> <span class="n">setstate</span> <span class="o">=</span> <span class="n">_notimplemented</span>
</span><span data-line="911">
</span><span data-line="912">
</span><span data-line="913"><span class="c1"># ----------------------------------------------------------------------</span>
</span><span data-line="914"><span class="c1"># Create one instance, seeded from current time, and export its methods</span>
</span><span data-line="915"><span class="c1"># as module-level functions.  The functions share state across all uses</span>
</span><span data-line="916"><span class="c1"># (both in the user&#39;s code and in the Python libraries), but that&#39;s fine</span>
</span><span data-line="917"><span class="c1"># for most programs and is easier for the casual user than making them</span>
</span><span data-line="918"><span class="c1"># instantiate their own Random() instance.</span>
</span><span data-line="919">
</span><span data-line="920"><span class="n">_inst</span> <span class="o">=</span> <span class="n">Random</span><span class="p">()</span>
</span><span data-line="921"><span class="n">seed</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">seed</span>
</span><span data-line="922"><span class="n">random</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">random</span>
</span><span data-line="923"><span class="n">uniform</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">uniform</span>
</span><span data-line="924"><span class="n">triangular</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">triangular</span>
</span><span data-line="925"><span class="n">randint</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">randint</span>
</span><span data-line="926"><span class="n">choice</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">choice</span>
</span><span data-line="927"><span class="n">randrange</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">randrange</span>
</span><span data-line="928"><span class="n">sample</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">sample</span>
</span><span data-line="929"><span class="n">shuffle</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">shuffle</span>
</span><span data-line="930"><span class="n">choices</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">choices</span>
</span><span data-line="931"><span class="n">normalvariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">normalvariate</span>
</span><span data-line="932"><span class="n">lognormvariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">lognormvariate</span>
</span><span data-line="933"><span class="n">expovariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">expovariate</span>
</span><span data-line="934"><span class="n">vonmisesvariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">vonmisesvariate</span>
</span><span data-line="935"><span class="n">gammavariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">gammavariate</span>
</span><span data-line="936"><span class="n">gauss</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">gauss</span>
</span><span data-line="937"><span class="n">betavariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">betavariate</span>
</span><span data-line="938"><span class="n">binomialvariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">binomialvariate</span>
</span><span data-line="939"><span class="n">paretovariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">paretovariate</span>
</span><span data-line="940"><span class="n">weibullvariate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">weibullvariate</span>
</span><span data-line="941"><span class="n">getstate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">getstate</span>
</span><span data-line="942"><span class="n">setstate</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">setstate</span>
</span><span data-line="943"><span class="n">getrandbits</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">getrandbits</span>
</span><span data-line="944"><span class="n">randbytes</span> <span class="o">=</span> <span class="n">_inst</span><span class="o">.</span><span class="n">randbytes</span>
</span><span data-line="945">
</span><span data-line="946">
</span><span data-line="947"><span class="c1">## ------------------------------------------------------</span>
</span><span data-line="948"><span class="c1">## ----------------- test program -----------------------</span>
</span><span data-line="949">
</span><span data-line="950"><span class="k">def</span> <span class="nf">_test_generator</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
</span><span data-line="951">    <span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">stdev</span><span class="p">,</span> <span class="n">fmean</span> <span class="k">as</span> <span class="n">mean</span>
</span><span data-line="952">    <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">perf_counter</span>
</span><span data-line="953">
</span><span data-line="954">    <span class="n">t0</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>
</span><span data-line="955">    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">_repeat</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">n</span><span class="p">)]</span>
</span><span data-line="956">    <span class="n">t1</span> <span class="o">=</span> <span class="n">perf_counter</span><span class="p">()</span>
</span><span data-line="957">
</span><span data-line="958">    <span class="n">xbar</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span data-line="959">    <span class="n">sigma</span> <span class="o">=</span> <span class="n">stdev</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">xbar</span><span class="p">)</span>
</span><span data-line="960">    <span class="n">low</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span data-line="961">    <span class="n">high</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span data-line="962">
</span><span data-line="963">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">t1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1"> sec, </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> times </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">args</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span data-line="964">    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;avg </span><span class="si">%g</span><span class="s1">, stddev </span><span class="si">%g</span><span class="s1">, min </span><span class="si">%g</span><span class="s1">, max </span><span class="si">%g</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xbar</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">))</span>
</span><span data-line="965">
</span><span data-line="966">
</span><span data-line="967"><span class="k">def</span> <span class="nf">_test</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">10_000</span><span class="p">):</span>
</span><span data-line="968">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">random</span><span class="p">,</span> <span class="p">())</span>
</span><span data-line="969">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">normalvariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="970">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">lognormvariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="971">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">vonmisesvariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="972">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">binomialvariate</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mf">0.60</span><span class="p">))</span>
</span><span data-line="973">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">binomialvariate</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">))</span>
</span><span data-line="974">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="975">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="976">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">))</span>
</span><span data-line="977">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="978">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="979">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="980">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="981">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">20.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="982">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gammavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">200.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="983">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">gauss</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
</span><span data-line="984">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">betavariate</span><span class="p">,</span> <span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>
</span><span data-line="985">    <span class="n">_test_generator</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">triangular</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">))</span>
</span><span data-line="986">
</span><span data-line="987">
</span><span data-line="988"><span class="c1">## ------------------------------------------------------</span>
</span><span data-line="989"><span class="c1">## ------------------ fork support  ---------------------</span>
</span><span data-line="990">
</span><span data-line="991"><span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_os</span><span class="p">,</span> <span class="s2">&quot;fork&quot;</span><span class="p">):</span>
</span><span data-line="992">    <span class="n">_os</span><span class="o">.</span><span class="n">register_at_fork</span><span class="p">(</span><span class="n">after_in_child</span><span class="o">=</span><span class="n">_inst</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span>
</span><span data-line="993">
</span><span data-line="994">
</span><span data-line="995"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span data-line="996">    <span class="n">_test</span><span class="p">()</span>
</span></pre></div>
        </article>
        <button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button>
        
        <div class="navigation flex print:hidden">
  
  
</div>
        
      </div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2024, Litestar Organization</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
  <a href="https://github.com/litestar-org/polyfactory" aria-label="GitHub"><i class="i-simpleicons github"></i></a>
  <a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)"><i class="i-simpleicons x-twitter"></i></a>
  <a href="https://discord.gg/litestar" aria-label="Discord"><i class="i-simpleicons discord"></i></a>
  <a href="https://www.reddit.com/r/LitestarAPI" aria-label="Reddit"><i class="i-simpleicons reddit"></i></a>
</div>
    </div>
  </div>
</footer></div>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=fc6e8733"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/litestar-theme.js?v=ab2dcc9e"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script src="../_static/design-tabs.js?v=36754332"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/shibuya.js?v=5f0e4c24"></script>
      <script src="../_static/versioning.js"></script>
    
</body>
</html>